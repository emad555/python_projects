if (self.CavalryLogger) { CavalryLogger.start_js(["DtnFn"]); }

__d("FBPaymentsCheckoutStep",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ADDRESS_COLLECT:null,CONFIRMATION:null,INCOMPLETE:null,INITIALIZING:null,NUX:null,PAYMENT_PROCESSING:null,PAYMENT_PROCESSING_EXTENDED:null,PIN:null,PIN_BACKLOADED:null,PSD_AGREEMENT_NUX:null,READY_TO_PAY:null,VERIFICATION:null});e.exports=a}),null);
__d("FBPaymentsInvoiceFetchStatus.graphql",["RelayModern","FBPaymentsInvoiceFetchStatusGraphqlQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;a=g!==void 0?g:g=b("FBPaymentsInvoiceFetchStatusGraphqlQuery.graphql");e.exports=a}),null);
__d("FBPaymentsCheckoutV2FlowContainerBase.react",["errorDesc","invariant","AllPaymentTypeFields","CommerceOnsiteEvent","DateConsts","FBLogger","FBPayCheckoutWebFunnelLoggingUtils","FBPayGatingUtils","FBPayments3DS","FBPaymentsAsyncCompleteCheckoutManager","FBPaymentsAsyncCompleteCheckoutUtils","FBPaymentsCheckoutActions","FBPaymentsCheckoutConfigurationStore","FBPaymentsCheckoutConfigurationTypes","FBPaymentsCheckoutConstants","FBPaymentsCheckoutContext","FBPaymentsCheckoutHelper","FBPaymentsCheckoutInfoParser","FBPaymentsCheckoutLoggerStore","FBPaymentsCheckoutStep","FBPaymentsCheckoutStrings","FBPaymentsContentConfigurationParser","FBPaymentsCountryCodes","FBPaymentsDispatcher","FBPaymentsFreeTrialExtensionUtil","FBPaymentsInvoiceFetchStatus.graphql","FBPaymentsLinkHelper","FBPaymentsLoggerBase","FBPaymentsLoggerConstants","FBPaymentsModulesAPIShared","FBPaymentsModulesAPIUtils","FBPaymentsModulesErrorConstants","FBPaymentsModulesFlowType","FBPaymentsNewPaymentOptionTypes","FBPaymentsPaymentMethodTypes","FBPaymentsPerfLogger","FBPaymentsPINConstants","FBPaymentsPriceListHelper","FBPaymentsStringHelper","FBPaymentsUniversalErrorUtils","FBPaymentsVerificationConstants","FBPaymentsVerificationFlowHelper","FBPayPINUtils","FBPayStrings","PaymentMethodUtils","PayPalFraudNetNew","PayPalFraudNetUrl","PECurrency","React","RelayAPIConfig","RelayFBEnvironment","RelayHooks","XCommerceOnsiteEventRouter","abstractMethod","enumUtils","getOwnObjectValues","gkx","immutable","keyMirror","promiseDone","prop-types","qex","uuid","PayTransactionStatus"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("FBPayCheckoutWebFunnelLoggingUtils").webFunnelLogFBPayCheckout,j=b("FBPayGatingUtils").shouldShowResearchSurvey,k=b("FBPaymentsPINConstants").PIN_FLOW_STEPS,l=b("PECurrency").formatAmountX,m=b("React"),n=b("RelayHooks").fetchQuery,o=b("DateConsts").MS_PER_SEC;a=b("FBPaymentsCheckoutConfigurationTypes").CheckoutConfigurationPropTypes;var p=(c=b("FBPaymentsCheckoutConstants")).CollectedDataKey,q=c.Extensions,r=c.OrderStatusModelType,s=c.PaymentAction,t=c.PaymentCallbackUpdateState,u=b("FBPaymentsCheckoutStep");b("immutable").List;var v=b("immutable").Set,w=b("FBPaymentsLoggerConstants").LoggerFlowType,x=b("FBPaymentsLoggerConstants").LoggerFlowStep,y=b("FBPaymentsLoggerConstants").LoggerEvent,z=b("FBPaymentsLoggerBase").LOGGER_FIELD_NAMES,A=b("FBPaymentsVerificationConstants").VERIFICATION_FLOW_RESULT,B=b("FBPaymentsModulesErrorConstants").PaymentModulesErrorCode,C=c.RestoreKey,D=b("FBPaymentsPINConstants").RETURNED_FROM_PAYPAL,E=b("FBPaymentsPINConstants").VERIFIED_PAYPAL_STEP,F=b("keyMirror")(b("PayTransactionStatus"));d=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d,e;e=a.call(this,c)||this;e.$20=function(a){e.$1.setFlowStep(x.CHECKOUT_TERMS_FETCH).setEventName(y.SUCCESS).log(),b("FBPaymentsCheckoutActions").termsAndPoliciesLoaded(a)};e.$21=function(a){var c=b("FBPaymentsUniversalErrorUtils").getErrorCode(a);e.$1.setFlowStep(x.CHECKOUT_TERMS_FETCH).setEventName(y.FAIL).setUserFacingMessage(a.message).setUserFacingErrorCode(c).setErrorMessage(a.serverErrorMessage).setErrorCode(c).setExceptionClass(a.exceptionClass).log();b("FBPaymentsCheckoutActions").termsAndPoliciesLoadError()};e.$23=function(a){e.$1.setFlowStep(x.UPDATE_CHECKOUT_API).setEventName(y.SUCCESS).log();var c=e.getCheckoutConfiguration().version;c=b("FBPaymentsContentConfigurationParser").parse(c,a,!0);e.state.step!==u.CONFIRMATION&&b("FBPaymentsCheckoutActions").updateContentConfiguration(c)};e.$26=function(a){b("FBPaymentsCheckoutActions").updateCheckoutInfoGraphQLResponse(a);e.$1.setFlowStep(x.CHECKOUT_INFORMATION).setEventName(y.SUCCESS).log();e.$10("checkout_load_success");a=b("FBPaymentsCheckoutInfoParser").parse(a,e.getCheckoutConfiguration().contentConfiguration,e.getPaymentType());e.state.step!==u.CONFIRMATION&&b("FBPaymentsCheckoutActions").updateCheckoutInfo(a)};e.$24=function(a){e.$1.setFlowStep(x.UPDATE_CHECKOUT_API).setEventName(y.FAIL).setUserFacingMessage(a.message).setErrorMessage(a.serverErrorMessage).setExceptionClass(a.exceptionClass).log(),b("FBPaymentsCheckoutActions").updateCheckoutLoadError(a)};e.$27=function(a){var c=b("FBPaymentsUniversalErrorUtils").getErrorCode(a),d=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(a),f=b("FBPaymentsUniversalErrorUtils").getServerErrorMessage(a);i("checkout_loading_fail_display",e.state.funnelLoggingSessionID);e.$10("checkout_load_failure");e.$1.setFlowStep(x.CHECKOUT_INFORMATION).setEventName(y.FAIL).setUserFacingMessage(d).setErrorMessage(f).setUserFacingErrorCode(c).setErrorCode(c).log();b("FBPaymentsCheckoutActions").updateCheckoutLoadError(a)};e.$30=function(a){switch(a.state){case t.LOADING:b("FBPaymentsCheckoutActions").paymentProcessingCallbackLoading({paymentProcessingMessage:a.loadingMessage||""});break;case t.DONE:e.$1.setFlowStep(x.PAYMENT).setEventName(y.SUCCESS).logVital();e.$19();b("FBPaymentsCheckoutActions").paymentProcessingCallbackDone({confirmationConfiguration:a.confirmationConfiguration});break;case t.ERROR:e.$1.setFlowStep(x.PAYMENT).setEventName(y.FAIL).setErrorMessage(a.errorMessage).log();e.$10("checkout_flow_failed");e.$19();b("FBPaymentsCheckoutActions").paymentProcessingCallbackError({global:a.errorMessage||b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage(),additional:a.additionalErrors});break;default:throw Error("Invalid payment callback state: "+a.state)}};e.__handleDialogClose=function(){if(e.state.step===u.CONFIRMATION){e.$33(!1);return}var a=e.__isExitCheckoutConfirmDialogEnabled();if(a){b("FBPaymentsCheckoutActions").showExitCheckoutConfirmDialog({showDialog:!0});return}b("FBPaymentsCheckoutActions").toggleIsCheckoutDialogShown(!1);e.$34()};e.$34=function(){var a;e.$1.setFlowStep(x.CHECKOUT_MODULE).setEventName(y.CANCEL).logVital();e.$10("checkout_flow_canceled");a=(a=e.getContentConfiguration())!=null?a.checkoutClosedCallback:a;a&&a();a=e.props.onCheckoutClosed;a&&a()};e.$36=function(a){e.setState({confirmationExtensions:a})};e.$41=function(a){e.setState({paymentsPIN:a}),e.$42()};e.$44=function(){i("pay_button_click",e.state.funnelLoggingSessionID),e.$42()};e.$50=function(){e.$1.setFlowStep(x.VERIFICATION).setEventName(y.BACK_CLICK).setUserFacingMessage(e.state.errors.global).addToExtraData("incomplete_idv_to_checkout","true").log(),i("verification_incomplete",e.state.funnelLoggingSessionID),b("FBPaymentsCheckoutActions").exitIncompleteVerificationFlow(),e.__scrollToTop()};e.$56=function(a){switch(a){case A.PASSED:e.$51();return;case A.PENDING_REVIEW:e.$55();return;default:e.$1.setFlowStep(x.VERIFICATION).setEventName(y.BACK_CLICK).setErrorMessage("Unsupported verification flow result: "+String(a)).log(),b("FBLogger")("purchase_experience").warn("Unsupported verification flow result: %s",a)}};e.$60=function(){i("checkout_exit_dialog_exit_click",e.state.funnelLoggingSessionID),b("FBPaymentsCheckoutActions").showExitCheckoutConfirmDialog({showDialog:!1}),b("FBPaymentsCheckoutActions").toggleIsCheckoutDialogShown(!1),e.$1.setFlowStep(x.CHECKOUT_EXIT_DIALOG).setEventName(y.CLICK).addToExtraData("button_name","exit").addToExtraData("is_payment_processing",e.getIsPaymentProcessing().toString()).logVital(),e.__shouldUseBackButtonOnConfirmedExit()?e.$31():e.$34()};e.$61=function(){i("checkout_exit_dialog_cancel_click",e.state.funnelLoggingSessionID),b("FBPaymentsCheckoutActions").showExitCheckoutConfirmDialog({showDialog:!1}),e.$1.setFlowStep(x.CHECKOUT_EXIT_DIALOG).setEventName(y.CLICK).addToExtraData("button_name","cancel").addToExtraData("is_payment_processing",e.getIsPaymentProcessing().toString()).logVital()};e.$62=function(){b("FBPaymentsCheckoutActions").showDonationLargeAmountConfirmDialog({showDialog:!1}),e.$1.setFlowStep(x.CHECKOUT_DONATION_LARGE_AMOUNT_DIALOG).setEventName(y.CLICK).addToExtraData("button_name","donate").logVital(),b("FBPaymentsCheckoutActions").payButtonClick(!1)};e.$63=function(){b("FBPaymentsCheckoutActions").showDonationLargeAmountConfirmDialog({showDialog:!1}),e.$1.setFlowStep(x.CHECKOUT_DONATION_LARGE_AMOUNT_DIALOG).setEventName(y.CLICK).addToExtraData("button_name","cancel").logVital()};e.$14=function(){var a,c;a=(a=e.state.cachedRequestData)==null?void 0:a.extra_data;c=(c=e.state.cachedRequestData)==null?void 0:c.mailing_address_id;b("FBPaymentsModulesAPIShared").confirmRazorPayPayment({payment_type:e.getPaymentType(),payment_session_id:e.state.paymentSessionID||"",context_id:b("FBPaymentsLinkHelper").getCurrentURIContextID(),product_id:e.getPaymentInfo().orderId,extra_data:a,address_id:c},e.$53,e.$54)};e.$69=function(a){b("FBPaymentsModulesAPIShared").confirmAltPayPayment({payment_type:e.getPaymentType(),payment_session_id:e.state.paymentSessionID||""},a,e.$53,e.$54)};e.$53=function(a,c){e.$68(!0);c&&Object.entries(c).forEach(function(a){var b=a[0];a=a[1];e.$1.addToExtraData(b,a)});e.$1.setFlowStep(x.PAYMENT).setEventName(y.SUCCESS).setPaymentID(a.id).logVital();b("FBPaymentsPerfLogger").logPaymentSuccess(e.getPaymentType());e.$10("checkout_succeeded");e.$19();c=e.props.onCheckoutSuccessCallback;if(c){var d=e.getSelectedPaymentMethod();c(d,a,e.$70.bind(babelHelpers.assertThisInitialized(e),a),e.$52)}else e.$70(a)};e.$54=function(a,c){e.$68(!1);e.__closeRazorPayPopup();c&&Object.entries(c).forEach(function(a){var b=a[0];a=a[1];e.$1.addToExtraData(b,a)});c=b("FBPaymentsUniversalErrorUtils").getErrorCode(a);var d=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(a),f=b("FBPaymentsUniversalErrorUtils").getServerErrorMessage(a);switch(c){case B.IDV_REQUIRED:e.$1.setFlowStep(x.PAYMENT).setEventName(y.FAIL).setUserFacingMessage(d).setErrorMessage(f).setUserFacingErrorCode(c).setErrorCode(c).addToExtraData("idv_status","required").log();b("FBPaymentsCheckoutActions").enterVerificationFlow({userFacingMessage:d});return;case B.ALT_PAY_FLOW_CANCELLED:e.$1.setFlowStep(x.PAYMENT).setEventName(y.CANCEL).setUserFacingMessage(d).setErrorMessage(f).setUserFacingErrorCode(c).setErrorCode(c).addToExtraData("alt_pay_cancelled","true").log();b("FBPaymentsPerfLogger").logPaymentFail(e.getPaymentType());b("FBPaymentsCheckoutActions").altPayFlowCancelled(a);break;case B.IDV_PENDING_MANUAL_REVIEW:e.$1.setFlowStep(x.PAYMENT).setEventName(y.FAIL).setUserFacingMessage(d).setErrorMessage(f).setUserFacingErrorCode(c).setErrorCode(c).addToExtraData("idv_status","pending_manual_review").log();b("FBPaymentsCheckoutActions").paymentProcessingError({global:d||b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage()});e.__scrollToTop();return}e.$1.setFlowStep(x.PAYMENT).setEventName(y.FAIL).setUserFacingMessage(d).setErrorMessage(f).setUserFacingErrorCode(c).setErrorCode(c).log();b("FBPaymentsPerfLogger").logPaymentFail(e.getPaymentType());e.$19();f=a&&a.errorCode?{userFacingError:a}:{global:d||b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage()};b("FBPaymentsCheckoutActions").paymentProcessingError(f);e.__scrollToTop()};e.$11=function(a,b){var c,d,f,g;a=a.transactionOrderDetails;a!=null||h(0,14199);c=(c=a==null?void 0:a.paymentID)!=null?c:"";d=(d=a==null?void 0:a.id)!=null?d:"";f=(f=a==null?void 0:a.receiptUrl)!=null?f:"";g=(g=a==null?void 0:(g=a.confirmationMessage)==null?void 0:g.text)!=null?g:"";e.$10("checkout_flow_failed",d);f={id:c,extra_data:{order_id:d,receipt_url:f,message_with_email:g,subscription_agreement:a.subscriptionAgreement}};g=(g=a)!=null?g.altpayRedirectURL:g;a=(a=a)!=null?a.razorpayRedirectURL:a;if(g){g={initURL:g,paymentID:c,onCancel:e.$69,onSuccess:e.$69,orderID:d};e.__connectAltPay(g)}else if(a){c=e.state.checkoutRestoreData;d={initURL:a,checkoutRestoreData:c,logger:e.$1,paymentType:e.getPaymentInfo().paymentItemType,onCancel:e.$14,onError:e.$14,onSuccess:e.$14};e.__connectRazorPay(d)}else e.$53(f,b)};e.$12=function(a,b){e.$54(a,b),e.$10("checkout_flow_failed")};e.$72=function(a){var b;b=(b=e.getContentConfiguration())!=null?b.dialogWidth:b;(e.state.activeExtension!==null||e.state.activeExtensionForVerification!==null)&&(b=a||b);if(b===e.state.dialogWidth)return;e.setState({dialogWidth:b})};b("FBPaymentsPerfLogger").logCheckoutFlowAppear(e.getPaymentType());e.validateProps(c);var f=e.$6(),g=e.$7();i("checkout_init",f,g);e.initializeLogging(c,f);b("FBPaymentsDispatcher").explicitlyRegisterStores(e.constructor.getStores());e.isGuestCheckout()&&e.props.guestActorID&&b("RelayAPIConfig").DO_NOT_USE_setActorID(e.props.guestActorID);g=c.configuration.contentConfiguration;e.state={activeExtension:null,activeExtensionForVerification:null,anyOngoingAPICall:!1,areAllExtensionsReady:!1,buttonPrice:null,cachedRequestData:{},checkoutRestoreData:{},confirmationExtensions:new Map(),contactInfoData:null,contentConfiguration:g,dialogWidth:c.dialogWidth||((d=g)!=null?d.dialogWidth:d),errors:{},extensionDataMap:b("immutable").Map(),extensionDataPreparerMap:b("immutable").Map(),extensionFlagsMap:b("immutable").OrderedMap(),extensionsToTriggerUpdateCheckout:v(),extensionUserFacingErrorMap:b("immutable").Map(),finalPriceList:[],freeTrialData:null,frequencySelectorData:null,funnelLoggingSessionID:f,hasInitializationError:!1,isCheckoutDialogShown:!0,isInitialized:!1,isUpdatingCheckout:!1,paymentMethodData:null,paymentsPIN:"",paymentProcessingMessage:"",paymentSessionID:null,priceSelectorData:null,receiverInfo:null,ResearchSurvey:null,shouldEnablePaypal:!1,showContactSupportFlow:!1,showExitCheckoutConfirmDialog:!1,showDonationLargeAmountConfirmDialog:!1,showUpfrontAddressCollection:!1,showVerificationFlow:!1,step:u.INCOMPLETE,termsAndPolicies:null,updateCheckoutLoadError:null,cardinal3DSProcessorData:null,altPayCancelledError:null,banner:null,isSecondaryPaymentMethodChecked:!1,paymentSecurity:null,redirectFromPaypalURL:null};b("FBPaymentsCheckoutActions").initializeCheckout({contentConfiguration:g,disableUpfrontAddressCollect:!!c.disableUpfrontAddressCollect,enableCheckoutNUX:e.isCheckoutNUXEnabled(),enablePSDAgreementNUX:e.isPaymentsPSDAgreementEnabled(),logger:e.$1,receiverCountry:(d=e.getPaymentInfo())==null?void 0:(f=d.extraData)==null?void 0:f.receiverCountry,shouldLoadContentConfiguration:!e.getIsUsingUpdateCheckoutAPI()&&!e.getIsUsingUpdateCheckoutInfoAPI(),paymentType:e.getPaymentType()});e.__completePaymentOnPaymentProcessing=!1;e.__restorePaymentFromRazorPayRedirect=!1;e.$2=!1;return e}var d=c.prototype;d.validateProps=function(a){a=a.configuration;var b=a.orderStatusModel.type;switch(b){case r.FIXED_AMOUNT:!a.contentConfiguration&&h(0,319,b);break;case r.UPDATE_CHECKOUT_API:case r.CHECKOUT_INFORMATION:break;default:h(0,320,b)}};d.initializeLogging=function(a,c){var d,e,f;switch(a.paymentModuleFlowType){case b("FBPaymentsModulesFlowType").INVOICE:e=w.INVOICE;f=x.INVOICE;break;default:e=w.CHECKOUT;f=x.CHECKOUT_MODULE;break}var g=this.__getLogger();this.$1=new g();g=a.configuration.paymentInfo;var h=g.orderId,i=g.receiverId,j=g.paymentItemType,k=g.isFreePurchase;g=g.extraData;this.$1.setGlobalFields((d={},d[z.session_id]=c,d[z.product]=j,d[z.order_id]=h,d[z.other_profile_id]=i,d[z.flow_name]=e,d[z.is_free]=k,d));c=b("gkx")("676854");h=b("gkx")("684838");g=babelHelpers["extends"]({},g,a.extraDataForLogging,a.checkoutExtraProps,(d={non_compliant_browser:c?"1":"",user_facing_error:h?"1":"",use_checkout_info:this.getIsUsingUpdateCheckoutInfoAPI()?"1":"",use_3ds2_flow:b("FBPaymentsCheckoutHelper").shouldUse3DS2Flow(j,(i=this.getPaymentInfo())==null?void 0:(k=i.extraData)==null?void 0:k.receiverCountry)},d[z.fbpay_enabled]=b("qex")._("1165624"),d));this.$1.setGlobalExtraData(g);f&&this.$1.setFlowStep(f).setEventName(y.INIT).logVital()};c.getStores=function(){return[this.__getCheckoutStore(),b("FBPaymentsCheckoutConfigurationStore"),b("FBPaymentsCheckoutLoggerStore")]};c.__getCheckoutStore=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getCheckoutStore")};c.calculateState=function(a,c){var d;a=babelHelpers["extends"]({},a);var e=this.__getCheckoutStore(),f=e.getState();a.priceSelectorData=f.priceSelectorData;a.freeTrialData=f.freeTrialData;a.frequencySelectorData=f.frequencySelectorData;a.contactInfoData=f.contactInfoData;var g=f.paymentMethodData;a.paymentMethodData=f.isSecondaryPaymentMethodChecked?g:babelHelpers["extends"]({},g,{secondaryPaymentMethod:null});a.checkoutRestoreData=f.checkoutRestoreData;a.buttonPrice=f.buttonPrice;a.termsAndPolicies=f.termsAndPolicies;a.receiverInfo=f.receiverInfo;a.extensionDataPreparerMap=f.extensionDataPreparerMap;a.extensionDataMap=f.extensionDataMap;a.extensionFlagsMap=f.extensionFlagsMap;a.extensionUserFacingErrorMap=f.extensionUserFacingErrorMap;a.step=f.checkoutStep;a.paymentProcessingMessage=f.paymentProcessingMessage;a.activeExtension=f.activeExtension;a.activeExtensionForVerification=f.activeExtensionForVerification;a.errors=f.checkoutErrors;a.showContactSupportFlow=f.showContactSupportFlow;a.showVerificationFlow=f.showVerificationFlow;a.cachedRequestData=f.cachedRequestData;a.isCheckoutDialogShown=f.isCheckoutDialogShown;a.isUpdatingCheckout=f.isUpdatingCheckout;a.isSecondaryPaymentMethodChecked=f.isSecondaryPaymentMethodChecked;a.contentConfiguration=b("FBPaymentsCheckoutConfigurationStore").getContentConfiguration();g=e.getFinalPriceList(a.contentConfiguration);d=(d=c.configuration)==null?void 0:(d=d.paymentInfo)==null?void 0:d.paymentItemType;d=(d==="mor_donations_cause_for_charities"||d==="mor_donations_matching_confirmation")&&((d=c.configuration)==null?void 0:(d=d.orderStatusModel)==null?void 0:d.type)===r.CHECKOUT_INFORMATION;c=((c=c.configuration)==null?void 0:(c=c.contentConfiguration)==null?void 0:c.priceList)||g;d=d?c:g;a.finalPriceList=d;a.isInitialized=e.isCheckoutInitialized(a.contentConfiguration);a.hasInitializationError=e.hasAnyInitializationError();a.areAllExtensionsReady=e.areAllExtensionsReady();a.showUpfrontAddressCollection=e.shouldShowUpfrontAddressCollection();a.paymentSessionID=f.paymentSessionID;a.ResearchSurvey=f.getResearchSurvey();a.extensionsToTriggerUpdateCheckout=f.extensionsToTriggerUpdateCheckout;a.showExitCheckoutConfirmDialog=f.showExitCheckoutConfirmDialog;a.showDonationLargeAmountConfirmDialog=f.showDonationLargeAmountConfirmDialog;a.updateCheckoutLoadError=f.updateCheckoutLoadError;a.cardinal3DSProcessorData=f.cmpi3DSResult;a.anyOngoingAPICall=f.getIsAnyAPICallsOngoing();a.altPayCancelledError=f.altPayCancelledError;a.banner=f.banner;a.paymentSecurity=f.getPaymentSecurity();a.shouldEnablePaypal=f.shouldEnablePaypal;return a};d.isCheckoutNUXEnabled=function(){return!!this.props.enableCheckoutNUX};d.isPaymentsPSDAgreementEnabled=function(){return!!this.props.psdAgreementID};d.getExtensionName=function(a){return a.identifier==="CUSTOM_EXTENSION"?a.extensionKey:a.identifier};d.getCheckoutConfiguration=function(){return this.props.configuration};d.getPaymentInfo=function(){return this.props.configuration.paymentInfo};d.getContentConfiguration=function(){if(this.getIsUsingUpdateCheckoutAPI()||this.getIsUsingUpdateCheckoutInfoAPI())return this.state.contentConfiguration;else return this.getCheckoutConfiguration().contentConfiguration};d.getPayActionContent=function(){var a=this.getContentConfiguration();return a&&a.payActionContent};d.getPayActionTitle=function(a,c){if(!(a==null?void 0:a.customLabelsForCredentials)&&(c==null?void 0:c.newPaymentOptionType)===b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL)return b("FBPaymentsCheckoutStrings").getNewPayPalPayActionTitle();if(!(a==null?void 0:a.customLabelsForCredentials)&&(c==null?void 0:c.newPaymentOptionType)===b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM)return b("FBPaymentsCheckoutStrings").getNewAffirmPayActionTitle();if(!(a==null?void 0:a.customLabelsForCredentials)||!c)return a==null?void 0:a.actionTitle;c=(c==null?void 0:c.newPaymentOptionType)?c==null?void 0:c.newPaymentOptionType:c==null?void 0:(c=c.paymentMethod)==null?void 0:c.type;var d=b("PaymentMethodUtils").getGraphQLPaymentMethodTypeFromLegacyType(c);c=(c=a==null?void 0:a.customLabelsForCredentials)!=null?c:[];c=c.find(function(a){return a.credential_type===d});return(c=c==null?void 0:c.label)!=null?c:a==null?void 0:a.actionTitle};d.getConfirmationConfiguration=function(){var a=this.state.contentConfiguration;return a&&a.confirmationConfiguration||{}};d.getSelectedPaymentMethod=function(){var a=this.state.extensionDataMap.get(q.PAYMENT_METHOD);return(a=a)!=null?a.paymentMethod:a};d.getIsUsingUpdateCheckoutAPI=function(){return this.getCheckoutConfiguration().orderStatusModel.type===r.UPDATE_CHECKOUT_API};d.getIsUsingUpdateCheckoutInfoAPI=function(){return this.isGuestCheckout()?!1:this.getCheckoutConfiguration().orderStatusModel.type===r.CHECKOUT_INFORMATION};d.getIsPaymentProcessing=function(){return this.state.step===u.PAYMENT_PROCESSING||this.state.step===u.PAYMENT_PROCESSING_EXTENDED};d.componentDidMount=function(){this.logExperimentExposures(),this.$8(!0),this.getIsUsingUpdateCheckoutInfoAPI()||this.$9(),this.$10("checkout_impression"),this.isAsyncPaymentType()&&(this.$5=new(b("FBPaymentsAsyncCompleteCheckoutManager"))(this.$11,this.$12,this.$1))};d.componentWillUnmount=function(){b("FBPaymentsCheckoutActions").unmountCheckoutFlow()};d.componentDidUpdate=function(a,c){var d=this;c.step!==u.PAYMENT_PROCESSING&&this.state.step===u.PAYMENT_PROCESSING&&(this.__completePaymentOnPaymentProcessing?(this.__completePaymentOnPaymentProcessing=!1,this.$13()):this.__restorePaymentFromRazorPayRedirect&&(this.__restorePaymentFromRazorPayRedirect=!1,this.$14()));if(this.getIsUsingUpdateCheckoutAPI()||this.getIsUsingUpdateCheckoutInfoAPI()){a=c.extensionDataMap;var e=this.state.extensionDataMap;c=a.some(function(a,b){if(d.$15(b)){a=JSON.stringify(a)!==JSON.stringify(e.get(b));return a}return!1});c&&(this.getIsUsingUpdateCheckoutInfoAPI()?this.$16():this.$17())}!this.state.anyOngoingAPICall&&this.state.isInitialized&&!this.state.isUpdatingCheckout&&!this.$3&&(b("FBPaymentsPerfLogger").annotateAddressFormUpfront(23265284,this.state.showUpfrontAddressCollection),b("FBPaymentsPerfLogger").markerEnd(23265284,this.getPaymentType()),this.$3=!0,this.$18());(this.state.step===b("FBPaymentsCheckoutStep").INCOMPLETE||this.state.step===b("FBPaymentsCheckoutStep").READY_TO_PAY)&&(this.$2||(this.$2=!0,this.$1.setFlowStep(x.CHECKOUT_SCREEN).setEventName(y.DISPLAY).logVital(),i("checkout_display",this.state.funnelLoggingSessionID)))};d.$18=function(){var a,b=Date.now();a=(a=this.props.checkoutExtraProps)==null?void 0:a.countdownTimerDurationInS;var c=3*o/4;a&&(this.__countdownTimerEndTime=b+a*o+c,this.forceUpdate())};d.$19=function(){var a;this.$1.setGlobalFields((a={},a[z.payment_method_id]=null,a[z.payment_method_type]=null,a[z.mailing_address_id]=null,a[z.shipping_option_id]=null,a[z.raw_amount]=null,a[z.currency]=null,a))};d.logExperimentExposures=function(){};d.$9=function(){var a,c=this.getPaymentInfo();a=(a=this.getPayActionContent())!=null?a.actionTitle:a;this.$1.setFlowStep(x.CHECKOUT_TERMS_FETCH).setEventName(y.API_INIT).log();this.isGuestCheckout()?b("FBPaymentsModulesAPIShared").fetchTermsAndPoliciesGraphQLRelay(c.paymentItemType,c.receiverId,c.orderId,c.extraData,a,this.$20,this.$21):this.__getAPI().fetchTermsAndPolicies(c.paymentItemType,c.receiverId,c.orderId,c.extraData,a,this.$20,this.$21)};d.$8=function(a){a===void 0&&(a=!1),this.getIsUsingUpdateCheckoutInfoAPI()?this.$16(a):this.getIsUsingUpdateCheckoutAPI()&&this.$17()};d.$17=function(){var a=this.$22();b("FBPaymentsCheckoutActions").setIsUpdatingCheckout();this.__getAPI().updateCheckoutGraphql(a,this.$23,this.$24)};d.$16=function(a){a===void 0&&(a=!1);var c=this.$25(a);b("FBPaymentsCheckoutActions").setIsUpdatingCheckout();this.$1.setFlowStep(x.CHECKOUT_INFORMATION).setEventName(y.API_INIT).addToExtraData("initial_load",a.toString()).log();b("FBPaymentsModulesAPIShared").updateCheckoutInformationGraphQL(c,this.$26,this.$27)};d.$25=function(a){var c,d;a===void 0&&(a=!1);var e=this.getPaymentInfo();c=(c=e==null?void 0:(c=e.extraData)==null?void 0:c.products)!=null?c:[];var f={};c={payment_type:e.paymentItemType,order_id:e.orderId,receiver_id:e.receiverId,logging_id:this.$1.getSessionID(),payment_session_id:this.state.paymentSessionID,products:c.map(function(a){var b;return{product_id:a.product_id,quantity:a.quantity,per_unit_price:a.price?{currency:(b=a.price)==null?void 0:b.currency,amount:(b=a.price)==null?void 0:b.amount}:null}}),is_initial_load:a};a=e.extraData||{};for(var e=this.state.extensionDataMap.entries(),g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];switch(j){case q.PAYMENT_METHOD:j=i.newPaymentOptionType?b("PaymentMethodUtils").getGraphQLPaymentMethodTypeFromLegacyType(i.newPaymentOptionType):i.paymentMethod.credentialType;d=(d=i)!=null?d.altPayData:d;d&&(f={altpay_data:{payment_provider:d.payment_provider,pricepoint_id:d.pricepoint_id,msisdn:d.msisdn}});c.selected_payment_credentials=babelHelpers["extends"]({},f,{credential_type:j,credential_id:i.paymentMethodID,billing_country:i.selectedBillingCountry});break;case q.SHIPPING_ADDRESS:c.selected_shipping_address_id=i.selectedMailingAddressID;break;case q.CONTACT_INFO:c.contact_name=i.name;c.selected_contact_email_id=i.emailID;c.selected_contact_phone_id=i.phoneNumberID;break;case q.CUSTOM_OPTIONS:c.selected_delivery_option_id=i==null?void 0:(d=i.selectedOption)==null?void 0:d.optionId;break;case q.COUPON_CODE:c.coupon_code=i.couponCode;break}}c.extra_data=JSON.stringify(a);return c};d.$22=function(){var a,c=this.getPaymentInfo(),d={payment_type:c.paymentItemType,order_id:c.orderId,receiver_id:c.receiverId,session_id:this.$1.getSessionID()};c=c.extraData||{};var e={};for(var f=this.state.extensionDataMap.entries(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];switch(j){case q.PAYMENT_METHOD:j=b("FBPaymentsModulesAPIUtils").getPaymentMethodRequestParamsGraphQL(i.paymentMethod,i.bank);a=(a=i)!=null?(a=a.altPayData)!=null?a.fee:a:a;a&&(e={payment_credential_data:JSON.stringify({altpay_fee:a}),payment_instrument_type:"ALTPAY"});d=babelHelpers["extends"]({},e,d,j);c=babelHelpers["extends"]({},c,{billingCountryCode:i.selectedBillingCountry});break;case q.SHIPPING_ADDRESS:d.mailing_address_id=i.selectedMailingAddressID;break;case q.CUSTOM_OPTIONS:j=(a=i)!=null?(a=a.extraData)!=null?a.collectedDataKey:a:a;a=(a=i)!=null?(a=a.selectedOption)!=null?a.optionId:a:a;switch(j){case p.SHIPPING_OPTION:d.shipping_option_id=a;break;default:if(j){var k;c=babelHelpers["extends"]({},c,(k={},k[j]=a,k))}}break;case q.COUPON_CODE:d.coupon_code=i.couponCode;break}}d.extra_data=JSON.stringify(c);return d};d.$15=function(a){if(this.getIsUsingUpdateCheckoutInfoAPI())return this.state.extensionsToTriggerUpdateCheckout.has(a);switch(a){case q.CONTACT_INFO:case q.COUPON_CODE:case q.PAYMENT_METHOD:case q.CUSTOM_OPTIONS:case q.SHIPPING_ADDRESS:return!0;default:return!1}};d.shouldConnectPayPalInCheckoutContainer=function(){return this.constructor.__getCheckoutStore().shouldConnectPayPalInCheckoutContainer()};d.areAllExtensionsReady=function(){return this.state.areAllExtensionsReady};d.isCheckoutInitialized=function(){return this.state.isInitialized};d.isGuestCheckout=function(){return!!this.props.guestActorID};d.isAsyncPaymentType=function(){return b("FBPaymentsAsyncCompleteCheckoutUtils").isAsyncPaymentType(this.getPaymentType())};d.isAsyncPayment=function(){return b("FBPaymentsAsyncCompleteCheckoutUtils").isAsyncPayment(this.getPaymentType())};d.$28=function(){return b("gkx")("763695")};d.$29=function(){var a,c;a=((a=this.state.paymentMethodData)==null?void 0:a.newPaymentOptionType)===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD||((a=this.state.paymentMethodData)==null?void 0:a.newPaymentOptionType)===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD_FROM_GRAPHQL||((a=this.state.paymentMethodData)==null?void 0:(a=a.paymentMethod)==null?void 0:a.type)===b("FBPaymentsPaymentMethodTypes").CREDIT_CARD||((a=this.state.paymentMethodData)==null?void 0:(a=a.paymentMethod)==null?void 0:a.type)===b("FBPaymentsPaymentMethodTypes").CREDIT_CARD_FROM_GRAPHQL;return b("FBPaymentsCheckoutHelper").shouldUse3DS2Flow(this.getPaymentType(),(c=this.getPaymentInfo())==null?void 0:(c=c.extraData)==null?void 0:c.receiverCountry)&&a&&b("FBPayments3DS").requires3DS2()};d.getPaymentType=function(){return this.getPaymentInfo().paymentItemType};d.__handleBackButtonClick=function(a){a===void 0&&(a=!1),!a&&this.__isExitCheckoutConfirmDialogEnabled()?(b("FBPaymentsCheckoutActions").showExitCheckoutConfirmDialog({showDialog:!0}),this.$1.setFlowStep(x.CHECKOUT_EXIT_DIALOG).setEventName(y.DISPLAY).addToExtraData("is_payment_processing",this.getIsPaymentProcessing().toString()).logVital()):this.$31()};d.$31=function(){this.$1.setFlowStep(x.CHECKOUT_MODULE).setEventName(y.CANCEL).logVital();this.$10("checkout_flow_canceled");var a=this.props.onBackButtonClick;if(a)a&&a();else{a=(a=this.getPayActionContent())!=null?a.backButtonCallback:a;a&&a()}};d.$32=function(){b("FBPaymentsCheckoutActions").nuxContinueButtonClick()};d.__exitCheckoutFlow=function(a){a===void 0;return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__exitCheckoutFlow")};d.$33=function(a){this.$35();var b=this.getConfirmationConfiguration().confirmationClosedCallback;b&&b(a,this.state.confirmationExtensions);b=this.props.onConfirmationClosed;b&&b(a,this.state.confirmationExtensions)};d.$35=function(){if(j()){var a=this.$37();a&&this.__getOpenSurveyRequest(a)}};d.$37=function(){var a=this.state.ResearchSurvey;return a?this.__getIsDesktop()?a.desktop_uri:a.msite_uri:null};d.$38=function(){var a=this.state.buttonPrice,c=this.getContentConfiguration(),d=b("FBPaymentsFreeTrialExtensionUtil").getIsUsingFreeTrial(this.state.freeTrialData),e=this.state.finalPriceList;if(c==null?void 0:c.newPriceTable){a=c==null?void 0:(c=c.newPriceTable)==null?void 0:c.totalPrice.price;if(d){a=b("FBPaymentsFreeTrialExtensionUtil").getFreeTrialPrice((c=(c=a)==null?void 0:c.currency)!=null?c:"")}}else if(this.isPriceListValid(e)){c=b("FBPaymentsPriceListHelper").calculateTotal(e);e=c.currency;e&&(a=d?b("FBPaymentsFreeTrialExtensionUtil").getFreeTrialPrice(e):{amount:c.amount.toString(),currency:e})}return a};d.$39=function(){var a,c,d=b("enumUtils").enumValueToKeyEnforcing(this.getPaymentType(),b("AllPaymentTypeFields")),e=this.state.paymentMethodData;c=((c=e)!=null?c.paymentMethodID:c)||"";e=(e=e)!=null?e.paymentMethod:e;e=(e==null?void 0:e.cardType)||"";a=((a=this.$38())==null?void 0:a.currency)||"";c={credentialID:c,creditCardType:e,currency:a,paymentInfo:this.getPaymentInfo(),paymentType:d};return b("FBPayments3DS").getAcquirerMerchantInfo(c)};d.$40=function(a){var c=this.state.paymentMethodData;c=(c=c)!=null?c.paymentMethodID:c;var d=this.$38();c={credentialID:c!=null?c:"",amount:{currency:(d==null?void 0:d.currency)||"",amount:(d==null?void 0:d.amount)||""},itemType:b("enumUtils").enumValueToKeyEnforcing(this.getPaymentType(),b("AllPaymentTypeFields")),lookupData:{email:"",mobile_phone:"",billing_first_name:"",billing_middle_name:"",billing_last_name:"",credit_card_address:{street:"",street2:"",city:"",state:"",zip:"",country_code:""},acs_window_size:"05",acquirer_merchant_info:a,challenge_indicator:""}};return c};d.$42=function(){var a,c;if(this.state.step===u.PAYMENT_PROCESSING)return;var d=this.state.paymentMethodData;c=(c=d)!=null?c.newPaymentOptionType:c;a=(a=d)!=null?a.paymentMethodID:a;var e={};this.state.extensionFlagsMap.forEach(function(a,b){e[b]=a.isReady?1:0});this.$1.setFlowStep(x.PAYMENT).setEventName(y.CLICK).setPaymentMethodType(c).setPaymentMethodID(a).addToExtraData("components",JSON.stringify(e)).addToExtraData("CVV data",JSON.stringify(d==null?void 0:(c=d.paymentMethod)==null?void 0:(a=c.csc)==null?void 0:a.length)).logVital();this.__completePaymentOnPaymentProcessing=!0;b("FBPaymentsCheckoutActions").payButtonClick(this.__isDonationLargeAmountConfirmDialogEnabled())};d.$43=function(){return this.state.step===u.READY_TO_PAY&&!this.state.isUpdatingCheckout&&this.areAllExtensionsReady()};d.$45=function(){return b("FBPayPINUtils").getShouldShowPinFlow(this.state.paymentSecurity)&&!Boolean(this.state.paymentsPIN)};d.$46=function(){return b("FBPayPINUtils").getPINFlowStep(this.state.paymentSecurity)};d.$47=function(){return b("FBPayPINUtils").getIsPINCreationUpfront(this.state.paymentSecurity)};d.$48=function(a){return a==="SHIPPING_ADDRESS"&&this.$49().paymentType==="mor_facebook_shop"};d.$51=function(){this.$1.setFlowStep(x.VERIFICATION).setEventName(y.DONE).addToExtraData("passed_idv_to_checkout","true").logVital();i("verification_passed",this.state.funnelLoggingSessionID);b("FBPaymentsCheckoutActions").exitPassedVerificationFlow();var a=this.state.cachedRequestData;if(!a){this.$52();return}this.isAsyncPayment()?(this.__startChannelManager(),this.$5!=null||h(0,11262),this.$5.makeAsyncPayment(a,this.getPaymentInfo())):this.__getAPI().completeCheckoutGraphQL(a,this.$53,this.$54)};d.$55=function(){this.$1.setFlowStep(x.VERIFICATION).setEventName(y.DONE).addToExtraData("pending_review_idv_to_checkout","true").logVital(),i("verification_pending",this.state.funnelLoggingSessionID),this.__exitCheckoutFlow(!0)};d.$57=function(){b("FBPaymentsCheckoutActions").contactSupportClick()};d.$58=function(){b("FBPaymentsCheckoutActions").exitIncompleteContactSupport()};d.$59=function(){b("FBPaymentsCheckoutActions").exitCompletedContactSupport()};d.__isDonationLargeAmountConfirmDialogEnabled=function(){var a,c;switch(this.getPaymentType()){case"mor_donations":case"mor_donations_cause_for_charities":case"mor_donations_matching_confirmation":case"mor_donations_matching_pledge":case"nmor_donation_p4p":case"nmor_blackbaud_rwr_donation":case"nmor_ppgf_donation":a=Number((a=(a=this.$38())==null?void 0:a.amount)!=null?a:"");c=Number((c=this.props.checkoutExtraProps)==null?void 0:c.amountForConfirmationDialog);return a>=c?b("gkx")("1176429"):!1;default:return!1}};d.__getDonationLargeAmountConfirmDialogCancelButtonLabel=function(){return b("FBPaymentsCheckoutStrings").getDonationLargeAmountConfirmDialogCancelButtonLabel()};d.__getDonationLargeAmountConfirmDialogConfirmButtonLabel=function(){return b("FBPaymentsCheckoutStrings").getDonationLargeAmountConfirmDialogConfirmButtonLabel()};d.__getDonationLargeAmountConfirmDialogDescription=function(){var a,c=this.$38(),d={showCurrencyCode:!1,showDecimals:!0,showSymbol:!0,stripZeros:!0,thousandSeparator:!0};c=l((a=c==null?void 0:c.currency)!=null?a:"",Number((a=c==null?void 0:c.amount)!=null?a:"")*100,d);return b("FBPaymentsCheckoutStrings").getDonationLargeAmountConfirmDialogDescription(c,(a=this.getContentConfiguration())==null?void 0:(d=a.entity)==null?void 0:d.participant.title)};d.$13=function(){var a=this;b("FBPaymentsCheckoutActions").updateCheckoutStep(u.PAYMENT_PROCESSING);var c=this.state.extensionDataPreparerMap,d=this.getPaymentInfo();d.paymentItemType==="nmor_donation_p4c"&&this.__connectRazorPay();b("promiseDone")(b("FBPaymentsCheckoutHelper").prepareExtensionDataPromise(c).then(function(b){!b&&h(0,960),a.$64(b)})["catch"](function(c){a.__closeRazorPayPopup();c=(c=c)!=null?c.error:c;b("FBPaymentsPerfLogger").logPaymentFail(a.getPaymentType());if(c)b("FBPaymentsCheckoutActions").paymentProcessingExtensionDataPrepError(c);else{c=b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage();b("FBPaymentsCheckoutActions").paymentProcessingExtensionDataPrepError({global:c})}a.__scrollToTop()}))};d.$64=function(a){var c=this;!this.$29()?this.$65(a):(i("use_threeds2_flow",this.state.funnelLoggingSessionID),b("promiseDone")(this.$39(),function(d){d=c.$40(d);b("promiseDone")(b("FBPayments3DS").fetchAuthenticationURL(d),function(d){b("FBPaymentsCheckoutActions").successful3DS({cmpiLookupResult:d}),i("threeds2_flow_complete",c.state.funnelLoggingSessionID),c.$65(a)},function(a){i("threeds2_flow_incomplete",c.state.funnelLoggingSessionID);a=a.fetch_3rd_party_payment_auth||"";a=a.status;a==="CHALLENGED"?(b("FBPaymentsPerfLogger").logPaymentCancel(c.getPaymentType()),c.$52()):c.$12()})}))};d.$65=function(a){var c=this,d,e=this.getPaymentInfo(),f=this.$66(a),g;d=(d=this.state.paymentMethodData)!=null?d.newPaymentOptionType:d;f.nmor_payment_method&&(g=JSON.parse(f.nmor_payment_method).type);var i=this.shouldConnectPayPalInCheckoutContainer()&&d===b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL,j=i?x.ADD_PAYPAL:x.PAYMENT;this.$1.setFlowStep(j).setEventName(y.API_INIT).setGlobalFields((j={},j[z.payment_method_id]=f.credential_id,j[z.payment_method_type]=g,j[z.mailing_address_id]=f.mailing_address_id,j[z.shipping_option_id]=f.shipping_option_id,j[z.raw_amount]=f.amount,j[z.currency]=f.currency,j));f.payment_type!=="nmor_event_ticketing"&&this.$1.updateExtraData(JSON.parse(f.extra_data));this.$10("purchase_button_clicked");var k;!i&&e.action!==s.CUSTOM_CALLBACK&&(k=this.isAsyncPayment(),this.$1.addToExtraData("async",k?"true":"false"));this.$1.logVital();if(i){j=b("FBPaymentsCheckoutHelper").buildCheckoutRestoreData(this.state.checkoutRestoreData,a);this.__connectPayPal({checkoutRestoreData:j,logger:this.$1,paymentType:e.paymentItemType})}else if(this.$45()){i=b("FBPaymentsCheckoutHelper").buildCheckoutRestoreData(this.state.checkoutRestoreData,a);j=(j=this.state.paymentMethodData)==null?void 0:j.paymentMethodID;var l=b("getOwnObjectValues")(C);i=b("FBPaymentsLinkHelper").getCurrentURI().removeQueryData(l).addQueryData(babelHelpers["extends"]({},i,(l={},l[C.PAYMENT_METHOD_ID]=j,l[C.RETURNED_FROM_PAYPAL]=D.VERIFY,l[C.RETURNED_FROM_VERIFY_PAYPAL_STEP]=E.UPDATE_PIN_IN_CHECKOUT,l)));this.setState({redirectFromPaypalURL:i.toString()});b("FBPaymentsCheckoutActions").updateCheckoutStep(u.PIN);return}else if(e.action===s.CUSTOM_CALLBACK)e.payCallbackV2!=null||h(0,961),e.payCallbackV2(this.state.extensionDataMap,this.$30,f);else{b("FBPaymentsCheckoutActions").cacheRequestData(f);if(k){d===b("FBPaymentsNewPaymentOptionTypes").NEW_ALT_PAY&&this.__connectAltPay();this.__startChannelManager();if(e.paymentItemType==="nmor_donation_p4c"){j=b("FBPaymentsCheckoutHelper").buildCheckoutRestoreData(this.state.checkoutRestoreData,a);b("promiseDone")(this.__getRazorPayCallbackURL({checkoutRestoreData:j,extraData:(l=this.state.cachedRequestData)==null?void 0:l.extra_data,addressId:(i=this.state.cachedRequestData)==null?void 0:i.mailing_address_id,logger:this.$1,paymentType:e.paymentItemType,paymentSessionID:this.state.paymentSessionID}),function(a){f.razorpay_callback_url=a,c.$5!=null||h(0,11262),c.$5.makeAsyncPayment(f,c.getPaymentInfo())},function(a){var c=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(a);a=a&&a.errorCode?{userFacingError:a}:{global:c!=null?c:b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage()};b("FBPaymentsCheckoutActions").paymentProcessingError(a)})}else this.$5!=null||h(0,11262),this.$5.makeAsyncPayment(f,this.getPaymentInfo())}else this.isGuestCheckout()||this.getPaymentType()==="mor_facebook_shop"?(f.paymentType=e.paymentItemType,b("FBPaymentsModulesAPIShared").completeCheckoutRelayGraphQL(f,this.$53,this.$54)):this.__getAPI().completeCheckoutGraphQL(f,this.$53,this.$54)}f.email_opt_in!=null&&f.email_opt_in!=void 0&&this.$1.setEventType(w.CHECKOUT).setFlowStep(x.EMAIL_OPT_IN).setEventName(y.SUBMIT).addToExtraData("requestData.email_opt_in",f.email_opt_in).log();f.email_opt_in===!0&&this.$1.setEventType(w.CHECKOUT).setFlowStep(x.EMAIL_OPT_IN).setEventName(y.CONFIRM).addToExtraData("requestData.email_opt_in",f.email_opt_in).log()};d.$67=function(a){if(b("FBPaymentsCheckoutHelper").shouldCollectFraudnetFeatures(a)){this.$4=(a=this.$4)!=null?a:b("PayPalFraudNetNew").collectFraudnetFeatures("FB_CHECKOUT_FLOW_ID",b("PayPalFraudNetUrl").fraudnet_url)}return this.$4};d.$66=function(a){var c,d,e=this.state,f=this.getPaymentInfo(),g=f.paymentItemType,i=this.$67(e.receiverInfo);g={action:f.action,payment_type:g,receiver_id:f.receiverId,order_id:f.orderId,products:(g=f.extraData)==null?void 0:g.products,session_id:this.$1.getSessionID(),payment_session_id:e.paymentSessionID,paypal_fraudnet_id:i};i=f.extraData||{};f=!1;var j={};for(var k=e.extensionDataMap.entries(),l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;var o=n[0];n=n[1];switch(o){case q.COUPON_CODE:g=babelHelpers["extends"]({},g,{coupon_code:n.couponCode});break;case q.PAYMENT_METHOD:var r=a.get(o);d=(d=r)!=null?d.paymentMethod:d;c=(c=n)!=null?c.altPayData:c;var s=void 0;if(c)delete c.fee,s={altPayData:c};else if(!((c=r)!=null?c.credit_card:c)){c=d||n.paymentMethod;n.secondaryPaymentMethod?(f=!0,j=n):s=b("FBPaymentsModulesAPIUtils").getPaymentMethodRequestParams(c,n.bank)}g=babelHelpers["extends"]({},g,s);n.csc&&(g.csc=n.csc);((d=r)!=null?d.credit_card:d)&&(g=babelHelpers["extends"]({},g,r));break;case q.CONTACT_INFO:c=a.get(o);d=(s=c)!=null?s.emailID:s;s=(r=c)!=null?r.emailAddress:r;c=(r=c)!=null?r.phoneNumberID:r;r=e.contactInfoData;r&&(g.contact_name=r.name,g.email_address_id=d||r.emailID,g.email_address=s||r.email,g.contact_number_id=c||r.phoneNumberID);break;case q.PRICE_SELECTOR:d=e.priceSelectorData;d&&(g.amount=b("FBPaymentsPriceListHelper").formatStringAmount(Number(d.selectedAmount)),g.currency=d.currency);break;case q.SHIPPING_ADDRESS:g.mailing_address_id=n.selectedMailingAddressID;break;case q.CUSTOM_OPTIONS:c=(s=n)!=null?(s=s.extraData)!=null?s.collectedDataKey:s:s;d=(r=n)!=null?(r=r.selectedOption)!=null?r.optionId:r:r;switch(c){case p.SHIPPING_OPTION:g.shipping_option_id=d;break;default:if(c){i=babelHelpers["extends"]({},i,(s={},s[c]=d,s))}}break;case q.FREQUENCY_SELECTOR:r=n.subscriptionType;c=n.subscriptionPeriod;r&&(g.subscription_type=r,g.subscription_period=c);break;case q.NATIONALITY_SELECTOR:d=n.isCitizen;g.is_citizen=d;break;case q.FREE_TRIAL:s=n.trialType;g.trial_type=s;break;case q.USER_INFO_OPT_IN:r=n.optIn;g.email_opt_in=r;break;default:i=babelHelpers["extends"]({},i,(c={},c[o]=n,c));break}}i.subscriptionType&&i.subscriptionPeriod&&(g.subscription_type=i.subscriptionType,g.subscription_period=i.subscriptionPeriod);d=this.state.finalPriceList;if((s=this.getContentConfiguration())==null?void 0:s.newPriceTable){o=(r=this.getContentConfiguration())==null?void 0:r.newPriceTable;g.currency=o==null?void 0:(n=o.totalPrice)==null?void 0:(c=n.price)==null?void 0:c.currency;g.amount=o==null?void 0:(m=o.totalPrice)==null?void 0:(l=m.price)==null?void 0:l.amount}else if(!g.currency||!g.amount){this.isPriceListValid(d)||h(0,962);k=b("FBPaymentsPriceListHelper").calculateTotal(d);g.currency=k.currency;g.amount=b("FBPaymentsPriceListHelper").formatStringAmount(k.amount)}if(f){!g.amount&&h(0,12982);a=b("FBPaymentsModulesAPIUtils").getMultiCredentialRequestParams(j,g.currency,g.amount);g=babelHelpers["extends"]({},g,a)}this.state.paymentsPIN&&(g.security_pin={sensitive_string_value:this.state.paymentsPIN});s=(e=this.getContentConfiguration())!=null?e.taxID:e;s&&(i=babelHelpers["extends"]({},i,{taxID:s}));c=(r=this.getContentConfiguration())==null?void 0:(n=r.taxInfo)==null?void 0:n.tax_info_collection_map;c&&(g.tax_info_collection_map=c);if(b("FBPaymentsFreeTrialExtensionUtil").getIsUsingFreeTrial(this.state.freeTrialData)){m=(o=this.state.freeTrialData)==null?void 0:o.subscriptionPrice;g.amount=m==null?void 0:m.amount;g.currency=m==null?void 0:m.currency}if(this.state.cardinal3DSProcessorData){l=this.state.cardinal3DSProcessorData;d=l.cardinalTransactionID;k=l.rowID;f=l.status;j=l.threeDSTransactionData;var t;j&&(t={threeDs_secure_version:j.threeDsSecureVersion,cavv:j.cavv,eci_flag:j.eciFlag,xid:j.xid,ds_transaction_id:j.dsTransactionID});g.cardinal_3ds_processor_data={ref_id:k||"",status:f,transaction_id:d||"",threeDS_transaction_data:t}}g.extra_data=JSON.stringify(i);return g};d.$68=function(a){this.$28()&&b("FBPaymentsModulesAPIShared").logPaymentSessionStatus({paymentSessionID:this.state.paymentSessionID,paymentType:this.getPaymentType(),sessionID:this.$1&&this.$1.getSessionID(),success:a})};d.$52=function(){b("FBPaymentsCheckoutActions").updateCheckoutStep(u.READY_TO_PAY)};d.$71=function(){var a=this.getPaymentInfo();if(a.paymentItemType!=="nmor_pages_commerce")return;n(b("RelayFBEnvironment"),b("FBPaymentsInvoiceFetchStatus.graphql"),{query_params:{id:a.orderId,critical_read:!0}}).toPromise()};d.$70=function(a,c){var d;this.$71();c=c||this.getConfirmationConfiguration();d=(d=a.extra_data)==null?void 0:d.order_status;if(d===F.PENDING){d=(d=a)!=null?(d=d.extra_data)!=null?d.confirmation_message:d:d;c.isPaymentStatusPending=!0}else{var e;c.receiptUrl=((e=this.props.checkoutExtraProps)!=null?e.receiptUrl:e)||((e=a)!=null?(e=e.extra_data)!=null?e.receipt_url:e:e)||b("FBPaymentsLinkHelper").getPaymentSettingsReceiptURI(a.id).toString();e=this.getPaymentType();d=e==="nmor_donation_p4c"?(e=a)!=null?(e=e.extra_data)!=null?e.confirmation_message:e:e:(e=a)!=null?(e=e.extra_data)!=null?e.message_with_email:e:e}d&&(c.confirmationText=b("FBPaymentsStringHelper").stringToMarkup(d));d=(e=a)!=null?(e=e.extra_data)!=null?e.subscription_details:e:e;d&&(c.subscriptionConfirmationDetails={image:d.subscription_image.uri,name:d.subscription_name,renewMessage:d.renew_amount,renewTitle:d.renew_date,subtitle:d.subscription_subtitle.text});d=(e=a.extra_data)==null?void 0:e.subscription_agreement;if(d){c.subscriptionConfirmationDetails={image:(a=d.image)==null?void 0:a.uri,name:d.name,renewMessage:d.editMessage,renewTitle:d.renewMessage,subtitle:d.subtitle.text}}a=(e=this.props.checkoutExtraProps)!=null?e.doneButtonText:e;a&&(c.doneButtonText=a);e=(d=this.props.checkoutExtraProps)!=null?d.doneButtonTrackingNodeType:d;e&&(c.doneButtonTrackingNodeType=e);a=this.getContentConfiguration();a||h(0,323);a.confirmationConfiguration=c;b("FBPaymentsCheckoutActions").updateContentConfiguration(a);b("FBPaymentsCheckoutActions").updateCheckoutStep(u.CONFIRMATION)};d.$73=function(){b("FBPaymentsCheckoutActions").updateCheckoutStep(u.READY_TO_PAY)};d.$10=function(a,c){var d;if(this.getPaymentType()!=="nmor_checkout_experiences")return;d=(d=(d=this.getPaymentInfo().extraData)==null?void 0:d.products)!=null?d:[];d=d.map(function(a){return a.product_id});b("XCommerceOnsiteEventRouter").logEvent(a,{productIDs:d,adID:(a=this.getPaymentInfo().extraData)==null?void 0:(d=a.server_logging_params)==null?void 0:d.ad_id,orderID:c})};d.isPriceListValid=function(a){return!!a&&a.length>0};d.$74=function(a){var c=this,d=b("FBPaymentsLinkHelper").getVerifiedPaypalAccessToken();a={cred_id:a,pp_access_token:d,payment_type:this.getPaymentType()};this.__getAPI().verifyConsumerAuthGraphQL(a,!0,function(){c.$8(),b("FBPaymentsCheckoutActions").shouldEnablePaypal(!1)},function(a){b("FBPaymentsCheckoutActions").shouldEnablePaypal(!1);var c=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(a);a=a&&a.errorCode?{userFacingError:a}:{global:c!=null?c:b("FBPaymentsModulesAPIUtils").getUncaughtErrorMessage()};b("FBPaymentsCheckoutActions").paymentProcessingError(a)})};d.$75=function(a,b,c){var d=a.identifier==="CUSTOM_EXTENSION"?a["class"]:this.__getExtensionManager().getExtensionContainer(a.identifier);return d==null?null:m.jsx(d,{checkoutConfiguration:this.getCheckoutConfiguration(),checkoutExtraProps:this.props.checkoutExtraProps,extensionConfiguration:a,isActive:b,isActiveForVerification:c,isGuestCheckout:this.isGuestCheckout(),isUsingUpdateCheckoutInfoAPI:this.getIsUsingUpdateCheckoutInfoAPI(),logger:this.$1,onContactSupportClick:this.$57,onExtensionWidthChange:this.$72})};d.$49=function(){return{banner:this.state.banner,funnelLoggingSessionID:this.state.funnelLoggingSessionID,logger:this.$1,paymentType:this.getPaymentType(),theme:this.props.theme||"DEFAULT"}};d.$76=function(a){a===void 0&&(a=!1);return b("FBPayGatingUtils").isFBPayExperienceEnabled(this.getPaymentType())?b("FBPayStrings").FACEBOOK_PAY:a?b("FBPaymentsFreeTrialExtensionUtil").getFreeTrialCheckoutDialogTitle(this.state.freeTrialData,this.getPaymentType()):this.props.dialogTitle};d.$6=function(){return b("FBPaymentsLinkHelper").getCurrentURISessionID()||b("uuid")()};d.$7=function(){var a=this.__getFunnelLoggingPlatform(),b=this.getPaymentType();return{product_type:b,platform:a,app:"Facebook",external_session_id:(b=this.props.externalSessionID)!=null?b:null,page_id:null,product_id:null}};d.render=function(){var a=this,c=this.getContentConfiguration(),d,e,f,j,l,n,o=[],p,r=!1,s=!1,t=!1,v=!!this.props.renderInline,w=!!this.props.renderInlineWithPadding,x=b("FBPaymentsFreeTrialExtensionUtil").getIsUsingFreeTrial(this.state.freeTrialData),y=this.__isExtensionDisplayWhenValidatePIN(),z;if(this.state.showVerificationFlow){var A=this.__getVerificationFlowContainer(),B=b("FBPaymentsVerificationFlowHelper").getVerificationFlowPaymentType(this.getPaymentType()),C=b("FBPaymentsVerificationFlowHelper").getVerificationFlowProductType(B);!!B&&!!C||h(0,963,this.getPaymentType());z=m.jsx(A,{isAsyncDialogBody:!0,onBackClick:this.$50,onClose:this.$56,paymentType:B,verificationProductType:C})}var D;B=(A=this.state.errors)!=null?A.userFacingError:A;if(B){var E;C=this.__getUserFacingErrorNotice();A=B.primaryCta;!!A&&A.type==="contact_us"&&(A.onClick=this.$57);E=(E=B)!=null?E.flowStep:E;D=m.jsx(C,{callToAction:A,description:B.errorDescription,flowStep:E,logger:this.$1,title:B.errorTitle,use:B.imageType})}var F;if(this.state.showContactSupportFlow){C=this.__getContactSupportContainer();A=this.state.showUpfrontAddressCollection?q.SHIPPING_ADDRESS:this.state.activeExtension||this.state.activeExtensionForVerification;if(A!=null){E=this.state.extensionUserFacingErrorMap.get(A);B=E||B}E=(A=B)!=null?A.errorCode:A;B=(A=B)!=null?A.flowStep:A;A=this.getPaymentType();!!E&&!!B&&!!A||h(0,964);E={errorCode:E,flowStep:B,paymentType:A};F=m.jsx(C,{extraInfo:E,logger:this.$1,onBackClick:this.$58,onClose:this.$59})}var G;if(this.state.showExitCheckoutConfirmDialog){B=this.__getExitCheckoutConfirmDialog();B!=null&&(i("checkout_exit_click_display",this.state.funnelLoggingSessionID),G=m.jsx(B,{isShown:this.state.showExitCheckoutConfirmDialog,cancelButtonLabel:this.__getExitCheckoutConfirmDialogCancelButtonLabel(),confirmButtonLabel:this.__getExitCheckoutConfirmDialogConfirmButtonLabel(),description:b("FBPaymentsCheckoutStrings").getExitCheckoutConfirmDialogDescription(),logger:this.$1,onCancelClick:this.$61,onConfirmClick:this.$60,title:b("FBPaymentsCheckoutStrings").getExitCheckoutConfirmDialogTitle()}))}var H;if(this.state.showDonationLargeAmountConfirmDialog){A=this.__getDonationLargeAmountConfirmDialog();A!=null&&(H=m.jsx(A,{isShown:this.state.showDonationLargeAmountConfirmDialog,cancelButtonLabel:this.__getDonationLargeAmountConfirmDialogCancelButtonLabel(),confirmButtonLabel:this.__getDonationLargeAmountConfirmDialogConfirmButtonLabel(),description:this.__getDonationLargeAmountConfirmDialogDescription(),logger:this.$1,onCancelClick:this.$63,onConfirmClick:this.$62,title:b("FBPaymentsCheckoutStrings").getDonationLargeAmountConfirmDialogTitle()}))}var I;if(this.state.altPayCancelledError){C=this.__getCheckoutAlertDialog();if(C!=null){E=b("FBPaymentsUniversalErrorUtils").getErrorTitle(this.state.altPayCancelledError);B=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(this.state.altPayCancelledError);E&&B&&(I=m.jsx(C,{isShown:!0,confirmButtonLabel:this.__getAltPayCancelledDialogButtonLabel(),description:B,logger:this.$1,onConfirmClick:this.$34,title:E}))}}if(!c||this.state.hasInitializationError){A=this.__getLoadingView();f=m.jsx(A,{showLockSpinner:!0});C=b("FBPaymentsUniversalErrorUtils").getErrorDescription(this.state.updateCheckoutLoadError);E=this.state.hasInitializationError?b("gkx")("676858")?(B=C)!=null?B:b("FBPaymentsCheckoutStrings").getCheckoutInitializationErrorMessage():String(g._(function(a,b){return a._("This action can't be completed right now due to a temporary system error. Please come back later and try again.")},{})):void 0;f=m.jsx(A,{loadingText:E,logger:this.$1,loggerExtraData:{item_loading:c?null:"contentConfiguration"},showError:this.state.hasInitializationError,showLockSpinner:!0})}else{C=this.state.finalPriceList;B=c.payActionContent;A=c.entity;if(A){E=this.__getEntityHeaderContainer();j=m.jsx(E,{entity:A})}if(!!c.newPriceTable||this.isPriceListValid(C)){E=this.__getPriceTableComponent();A=!x&&!!((A=this.props)!=null?(A=A.checkoutExtraProps)!=null?A.showTaxDisclaimer:A:A)&&((A=this.state.paymentMethodData)!=null?A.selectedBillingCountry:A)===b("FBPaymentsCountryCodes").US;l=m.jsx(E,{hidePriceTable:!!((E=this.props)!=null?(E=E.checkoutExtraProps)!=null?E.hidePriceTable:E:E),hideTotal:!!((E=this.props)!=null?(E=E.checkoutExtraProps)!=null?E.hidePriceTableTotal:E:E),isCalculating:this.state.isUpdatingCheckout,isCollapsed:!!((E=this.props)!=null?(E=E.checkoutExtraProps)!=null?E.isPriceTableCollapsedInitially:E:E),newPriceTable:c.newPriceTable,logger:this.$1,priceList:C,showTaxDisclaimer:A,showTotalOnly:(E=this.props.checkoutExtraProps)==null?void 0:E.showTotalOnly,customTotalLabel:(A=this.props.checkoutExtraProps)==null?void 0:A.customTotalLabel})}E=this.state.buttonPrice;var J;if(c.newPriceTable)J=c.newPriceTable.totalPrice.displayPrice,E=c.newPriceTable.totalPrice.price,x&&(E=b("FBPaymentsFreeTrialExtensionUtil").getFreeTrialPrice(E.currency));else if(this.isPriceListValid(C)){A=b("FBPaymentsPriceListHelper").calculateTotal(C);C=A.currency;C&&(E=x?b("FBPaymentsFreeTrialExtensionUtil").getFreeTrialPrice(C):{amount:A.amount.toString(),currency:C})}A=this.getPaymentInfo().extraData;var K;C=((C=this.state)!=null?(C=C.frequencySelectorData)!=null?C.subscriptionType:C:C)||(A==null?void 0:A.subscriptionType);C&&(K={type:C,price:E});((A=this.props)==null?void 0:(C=A.checkoutExtraProps)==null?void 0:C.hidePayButtonPrice)&&(E=null);A=this.__getPayActionRowContainer();C=this.getPayActionTitle(B,this.state.paymentMethodData);n=m.jsx(A,{actionTitle:C,backButton:this.props.backButton||B.backButton,checkoutStep:this.state.step,configuration:B,isLoading:this.state.step===u.PAYMENT_PROCESSING,logger:this.$1,onBackButtonClick:function(){a.__handleBackButtonClick(!1)},onPayButtonClick:this.$44,payButtonEnabled:this.$43(),price:E,displayPrice:J,renderInline:v,subscriptionTermsDetails:K,termsAndPolicies:this.state.termsAndPolicies});r=this.state.activeExtension!==null;s=this.state.activeExtensionForVerification!==null;t=this.state.activeExtensionForVerification===q.PIN_VERIFICATION;A=c.purchaseInfo;for(var C=0;C<A.length;C++){B=A[C];E=this.getExtensionName(B);c=this.state.activeExtension===E;var L=this.state.activeExtensionForVerification===E,M=this.$48(E),N=t&&y?!1:r&&!c||s&&!L||this.state.showUpfrontAddressCollection&&E!==q.SHIPPING_ADDRESS;o.push(m.jsx("div",{style:{display:N||M?"none":""},children:this.$75(B,c,L)},E))}M=(N=this.getSelectedPaymentMethod())==null?void 0:N.id;this.state.shouldEnablePaypal&&M!=null&&this.$74(M);if(this.state.step===u.NUX){B=this.__getNUXContainer();d=m.jsx(B,{onBackButtonClick:function(){a.__handleBackButtonClick(!1)},onContinueButtonClick:this.$32,logger:this.$1})}else if(this.state.step===u.PSD_AGREEMENT_NUX){c=this.__getPSDAgreementNUXContainer();d=m.jsx(c,{logger:this.$1,onAccepted:this.$32,onBackButtonClick:function(){a.__handleBackButtonClick(!1)},paymentType:this.getPaymentType(),psdAgreementID:this.props.psdAgreementID})}else if(this.state.step===u.PIN){L=this.__getPINFlowContainer();e=m.jsx(L,{flowStep:this.$46(),onCancel:this.$73,onSuccess:this.$41,pinCreationFlowType:(E=this.state.paymentSecurity)==null?void 0:E.fbpay_pin_creation_flow_type,redirectFromPaypalURL:this.state.redirectFromPaypalURL,title:this.$76()})}else if(this.state.step===u.PIN_BACKLOADED){C=this.__getPINFlowContainer();e=m.jsx(C,{flowStep:k.CREATE_PIN,onCancel:function(){a.setState({step:u.CONFIRMATION})},onSuccess:function(){b("FBPaymentsCheckoutActions").createPINSuccess(),a.setState({step:u.CONFIRMATION})},pinCreationFlowType:(A=this.state.paymentSecurity)==null?void 0:A.fbpay_pin_creation_flow_type})}N=this.state.step===u.INITIALIZING||!this.isCheckoutInitialized()||this.state.step===u.PAYMENT_PROCESSING_EXTENDED||this.state.shouldEnablePaypal;if(N){M=this.__getLoadingView();f=m.jsx(M,{loadingText:this.state.paymentProcessingMessage,logger:this.$1,loggerExtraData:{item_loading:"checkout"},showLockSpinner:!0})}if(this.state.step===u.CONFIRMATION||this.state.step===u.PIN_BACKLOADED){B=this.__getConfirmationContainer();p=m.jsx(B,{configuration:this.getConfirmationConfiguration(),onBackloadedPINCreationClick:function(){a.setState({step:u.PIN_BACKLOADED})},onConfirmationDoneClick:this.$33.bind(this,!0),enableInlineBackloadedPINCreationView:(c=this.props.checkoutExtraProps)==null?void 0:c.enableInlineBackloadedPINCreationView,onExtensionsUpdate:this.$36,paymentInfo:this.getPaymentInfo(),paymentSecurity:this.state.paymentSecurity,researchSurvey:this.$37()})}}L=this.__getCheckoutFlowView();E=this.$76(x);return m.jsx(b("FBPaymentsCheckoutContext").Provider,{value:this.$49(),children:m.jsx(L,{banner:this.state.banner,checkoutErrors:this.state.errors,checkoutHeader:this.props.checkoutHeader,confirmationContainer:p,contactSupportContainer:F,countdownTimerEndTime:this.__countdownTimerEndTime,dialogTitle:E,dialogWidth:this.state.dialogWidth||void 0,disableClose:this.state.step===u.PAYMENT_PROCESSING||this.state.step===u.PAYMENT_PROCESSING_EXTENDED,entityHeaderContainer:j,exitCheckoutConfirmDialog:G,donationLargeAmountConfirmDialog:H,altPayCancelledDialog:I,extensionContainers:o,hideCheckoutHeader:this.props.hideCheckoutHeader,isCheckoutDialogShown:this.state.isCheckoutDialogShown,isCometView:this.props.isCometView,isExtensionActive:r,isExtensionActiveForVerification:s,isPINActiveAndExtensionsDisplay:t&&y,isProcessing:this.state.step===u.PAYMENT_PROCESSING,logger:this.$1,loadingView:f,nuxContainer:d,onBackButtonClick:function(){a.__handleBackButtonClick(!1)},onDialogClose:this.__handleDialogClose,payActionRowContainer:n,priceTable:l,showUpfrontAddressCollection:this.state.showUpfrontAddressCollection,renderInline:v,renderInlineWithPadding:w,userFacingErrorNotice:D,verificationFlowContainer:z,pinFlowContainer:e})})};d.__scrollToTop=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__scrollToTop")};d.__shouldUseBackButtonOnConfirmedExit=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__shouldUseBackButtonOnConfirmedExit")};d.__connectAltPay=function(a){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__connectAltPay")};d.__connectPayPal=function(a){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__connectPayPal")};d.__connectRazorPay=function(a){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__connectRazorPay")};d.__closeRazorPayPopup=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__closeRazorPayPopup")};d.__getExtensionManager=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getExtensionManager")};d.__getCheckoutFlowView=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getCheckoutFlowView")};d.__getNUXContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getNUXContainer")};d.__getPSDAgreementNUXContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getPSDAgreementNUXContainer")};d.__getLoadingView=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getLoadingView")};d.__getConfirmationContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getConfirmationContainer")};d.__getEntityHeaderContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getEntityHeaderContainer")};d.__getPayActionRowContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getPayActionRowContainer")};d.__getPINFlowContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getPINFlowContainer")};d.__getVerificationFlowContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getVerificationFlowContainer")};d.__getUserFacingErrorNotice=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getUserFacingErrorNotice")};d.__getContactSupportContainer=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getContactSupportContainer")};d.__isExitCheckoutConfirmDialogEnabled=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__isExitCheckoutConfirmDialogEnabled")};d.__isExtensionDisplayWhenValidatePIN=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__isExtensionDisplayWhenValidatePIN")};d.__getCheckoutAlertDialog=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getCheckoutAlertDialog")};d.__getExitCheckoutConfirmDialog=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getExitCheckoutConfirmDialog")};d.__getExitCheckoutConfirmDialogCancelButtonLabel=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getExitCheckoutConfirmDialogCancelButtonLabel")};d.__getExitCheckoutConfirmDialogConfirmButtonLabel=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getExitCheckoutConfirmDialogConfirmButtonLabel")};d.__getDonationLargeAmountConfirmDialog=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getDonationLargeAmountConfirmDialog")};d.__getAltPayCancelledDialogButtonLabel=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getAltPayCancelledDialogButtonLabel")};d.__getRazorPayCallbackURL=function(a){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getRazorPayCallbackURL")};d.__getPriceTableComponent=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getPriceTableComponent")};d.__getAPI=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getAPI")};d.__getLogger=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getLogger")};d.__startChannelManager=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__startChannelManager")};d.__getFunnelLoggingPlatform=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getFunnelLoggingPlatform")};d.__getIsDesktop=function(){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getIsDesktop")};d.__getOpenSurveyRequest=function(a){return b("abstractMethod")("FBPaymentsCheckoutV2FlowContainerBase","__getOpenSurveyRequest")};return c}(m.Component);d.propTypes={checkoutExtraProps:(f=b("prop-types")).object,configuration:a.isRequired,dialogTitle:f.node,enableCheckoutNUX:f.bool,extraDataForLogging:f.object,hideCheckoutHeader:f.bool,onCheckoutClosed:f.func,onCheckoutSuccessCallback:f.func,onConfirmationClosed:f.func,paymentModuleFlowType:f.oneOf(Object.values(b("FBPaymentsModulesFlowType"))).isRequired};d.defaultProps={paymentModuleFlowType:b("FBPaymentsModulesFlowType").CHECKOUT};e.exports=d}),null);
__d("FBPaymentsCheckoutV2FlowViewBase.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=440;d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.__isNUX=function(){return!!this.props.nuxContainer};c.__isExtensionActive=function(){return this.props.isExtensionActive};c.__isLoading=function(){return!!this.props.loadingView};c.__isConfirmation=function(){return!!this.props.confirmationContainer};c.__shouldHideExtensionBecauseExtensionActiveForVerification=function(){return this.props.isExtensionActiveForVerification&&!this.props.isPINActiveAndExtensionsDisplay};c.__shouldShowNUX=function(){return this.__isNUX()};c.__shouldShowCountdownTimer=function(){return!!this.props.countdownTimerEndTime&&!this.__isLoading()&&!this.__isConfirmation()};c.__shouldShowHeader=function(){return!this.props.hideCheckoutHeader&&!this.__isNUX()&&!this.__isExtensionActive()&&!this.__isLoading()&&!this.__isConfirmation()&&!this.__shouldHideExtensionBecauseExtensionActiveForVerification()&&!this.__shouldShowContactSupportScreen()&&!this.__shouldShowPINFlow()};c.__shouldShowLoading=function(){return this.__isLoading()};c.__shouldShowContactSupportScreen=function(){return!!this.props.contactSupportContainer};c.__shouldShowVerificationFlow=function(){return!!this.props.verificationFlowContainer};c.__shouldShowPINFlow=function(){return!!this.props.pinFlowContainer};c.__shouldDisableForProcessing=function(){return this.props.isProcessing};c.__shouldShowConfirmation=function(){return this.__isConfirmation()};c.__shouldShowEntityHeader=function(){return!this.__isNUX()&&!this.__isExtensionActive()&&!this.__isLoading()&&!this.__isConfirmation()&&!this.__shouldHideExtensionBecauseExtensionActiveForVerification()&&!this.__shouldShowContactSupportScreen()};c.__shouldShowPriceTable=function(){return!this.__isNUX()&&!this.__isExtensionActive()&&!this.__isLoading()&&!this.__isConfirmation()&&!this.__shouldHideExtensionBecauseExtensionActiveForVerification()&&!this.__shouldShowUpfrontAddressCollection()&&!!this.props.priceTable&&!this.__shouldShowContactSupportScreen()};c.__shouldShowExtensions=function(){return!this.__isNUX()&&!this.__isLoading()&&!this.__isConfirmation()&&!this.__shouldShowContactSupportScreen()};c.__shouldShowPayActionRow=function(){return!this.__isNUX()&&!this.__isExtensionActive()&&!this.__isLoading()&&!this.__isConfirmation()&&!this.__shouldHideExtensionBecauseExtensionActiveForVerification()&&!this.__shouldShowUpfrontAddressCollection()&&!this.__shouldShowContactSupportScreen()};c.__shouldShowUpfrontAddressCollection=function(){return this.props.showUpfrontAddressCollection};c.__maybeShowCheckoutError=function(){return!!this.props.checkoutErrors&&!this.__shouldShowContactSupportScreen()&&!this.__isExtensionActive()};c.__shouldShowDialogTitle=function(){return!this.__shouldShowContactSupportScreen()};c.getBackButtonText=function(){return g._("Back")};c.getCancelButtonText=function(){return g._("Cancel")};c.getCheckoutHeaderTitle=function(){return this.props.dialogTitle||g._("Checkout")};return b}(a.Component);d.defaultProps={dialogWidth:c};e.exports=d}),null);
__d("FBPaymentsConfirmationConstants",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a={Extensions:b("keyMirror")({CUSTOM_EXTENSION:null})};e.exports=a}),null);
__d("FBPaymentsConfirmationContainerBase.react",["fbt","FBPaymentsConfirmationConstants","React","abstractMethod"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("FBPaymentsConfirmationConstants").Extensions;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={extensionData:new Map()};return b}var d=c.prototype;d.handleConfirmationExtensionUpdate=function(a,b){var c={extensionData:this.state.extensionData};c.extensionData.set(a,b.data);this.setState(c);this.props.onExtensionsUpdate(c.extensionData)};d.$1=function(a){var b=this,c=this.getExtensionName(a),d=a["class"];d=a.identifier===i.CUSTOM_EXTENSION?d:this.__getConfirmationExtensionManager().getConfirmationExtensionContainer(c);if(!d)throw Error("Unimplemented payments confirmation extension "+c);return h.jsx(d,{extensionConfiguration:a,onConfirmationExtensionUpdate:function(a){b.handleConfirmationExtensionUpdate(c,a)}})};d.getExtensionName=function(a){return a.extensionKey||a.identifier};d.getCustomReceiptText=function(){var a=this.props.paymentInfo&&this.props.paymentInfo.paymentItemType;return a==="nmor_checkout_experiences"?g._("Review Order Details"):null};d.getShouldShowBackloadedPINCreationView=function(){var a=this.props.paymentSecurity||{},b=a.user_has_pin;a=a.fbpay_pin_creation_flow_type;return!Boolean(b)&&a==="BACKLOADED"};d.render=function(){var a=this.__getView(),b=[],c=this.props.configuration.confirmationExtensions;for(var d=0;c&&d<c.length;d++){var e=c[d],f=this.getExtensionName(e);b.push(h.jsx("div",{children:this.$1(e)},f+d));f==="share"&&this.getShouldShowBackloadedPINCreationView()&&this.props.enableInlineBackloadedPINCreationView&&b.push(h.jsx("div",{children:this.__getInlineBackloadedPINCreationView()},"inlineBackloadedPINCreation"))}e=this.props.configuration;f=e.confirmationText;c=e.customConfirmationImage;d=e.doneButtonText;var g=e.doneButtonTrackingNodeType,i=e.enableReceiptFooterLink,j=e.forceHideReceiptCTA,k=e.merchantLogoUrl,l=e.receiptUrl,m=e.subscriptionConfirmationDetails,n=e.hideDoneButton;e=e.isPaymentStatusPending;return h.jsx(a,{confirmationText:f,customConfirmationImage:c,customReceiptText:this.getCustomReceiptText(),doneButtonText:d,doneButtonTrackingNodeType:g,enableInlineBackloadedPINCreationView:this.props.enableInlineBackloadedPINCreationView,enableReceiptFooterLink:i,forceHideReceiptCTA:j,handleConfirmationDone:this.props.onConfirmationDoneClick,hideDoneButton:n,isPaymentStatusPending:e,merchantLogoUrl:k,onBackloadedPINCreationClick:this.props.onBackloadedPINCreationClick,paymentSecurity:this.props.paymentSecurity,receiptUrl:l,researchSurvey:this.props.researchSurvey,subscriptionConfirmationDetails:m,children:b})};d.__getView=function(){return b("abstractMethod")("FBPaymentsConfirmationContainerBase","__getView")};d.__getInlineBackloadedPINCreationView=function(){return b("abstractMethod")("FBPaymentsConfirmationContainerBase","__getInlineBackloadedPINCreationView")};d.__getConfirmationExtensionManager=function(){return b("abstractMethod")("FBPaymentsConfirmationContainerBase","__getConfirmationExtensionManager")};return c}(h.Component);e.exports=a}),null);
__d("FBPaymentsConfirmationExtensionInterface.react",["FBPaymentsCheckoutConfigurationTypes","React","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=b("FBPaymentsCheckoutConfigurationTypes").ConfirmationExtensionPropTypes;d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.Component);d.propTypes={extensionConfiguration:c,onConfirmationExtensionUpdate:b("prop-types").func.isRequired};e.exports=d}),null);
__d("FBPaymentsConfirmationExtensionManagerBase",["FBPaymentsConfirmationConstants","FBPaymentsConfirmationExtensionInterface.react","abstractMethod"],(function(a,b,c,d,e,f){"use strict";var g=b("FBPaymentsConfirmationConstants").Extensions;a=function(){function a(){}var c=a.prototype;c.getConfirmationExtensionContainer=function(a){if(!g[a])throw Error("Non-existent payments confirmation extension "+a);var b=this.__getConfirmationExtensionMap().get(a);if(!b)throw Error("Unimplemented payments confirmation extension "+a);return b};c.__getConfirmationExtensionMap=function(){return b("abstractMethod")("FBPaymentsConfirmationExtensionManagerBase","__getConfirmationExtensionMap")};return a}();e.exports=a}),null);
__d("FBPaymentsConfirmationViewBase.react",["fbt","FBPayGatingUtils","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getConfirmationText=function(){var a;return(a=this.props.confirmationText)!=null?a:h.jsx("span",{children:g._("Thanks for your purchase!")})};d.getConfirmationTitle=function(){return g._("Confirmation")};d.getReceiptText=function(){var a;return(a=this.props.customReceiptText)!=null?a:g._("See Receipt")};d.getPINSettingsText=function(){var a=b("FBPayGatingUtils").isFBPayExperienceEnabled();return a?g._("Manage Facebook Pay PIN"):null};d.getDoneButtonText=function(){var a;return(a=this.props.doneButtonText)!=null?a:g._("Done")};d.getShouldShowBackloadedPINCreationView=function(){var a=this.props.paymentSecurity||{},b=a.user_has_pin;a=a.fbpay_pin_creation_flow_type;return!Boolean(b)&&a==="BACKLOADED"};return c}(h.Component);e.exports=a}),null);
__d("FBPaymentsConsentViewBase.react",["React","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.Component);c.propTypes={consentContent:(d=b("prop-types")).node.isRequired,logoSrc:d.object,subtitle:d.node,termsAndPoliciesText:d.node.isRequired,title:d.node};e.exports=c}),null);
__d("FBPaymentsRoundImageEntityHeaderViewBase.react",["React","abstractMethod"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.ENTITY_IMAGE_HEIGHT=36,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getTitle=function(){return this.props.entity.participant.title};d.getSubtitle1=function(){return this.props.entity.participant.subtitle};d.getImageSrc=function(){return this.props.entity.participant.imageURL};d.getSubtitle2=function(){return this.props.entity.description};d.getDescriptionWithEntity=function(){return this.props.entity.descriptionWithEntity};d.hasSingleSubtitle=function(){return!!this.getSubtitle1()&&!this.getSubtitle2()};d.hasSubtitle=function(){return!!(this.getSubtitle1()||this.getSubtitle2())};d.hasDescriptionWithEntity=function(){return!!this.getDescriptionWithEntity()};d.__renderTitle=function(){return b("abstractMethod")("FBPaymentsRoundImageEntityHeaderViewBase","__renderTitle")};d.__renderSubtitles=function(){return b("abstractMethod")("FBPaymentsRoundImageEntityHeaderViewBase","__renderSubtitles")};d.__renderEntityDescription=function(){return b("abstractMethod")("FBPaymentsRoundImageEntityHeaderViewBase","__renderEntityDescription")};d.__getClassNames=function(){return b("abstractMethod")("FBPaymentsRoundImageEntityHeaderViewBase","__getClassNames")};d.__getItemSummaryView=function(){return b("abstractMethod")("FBPaymentsRoundImageEntityHeaderViewBase","__getItemSummaryView")};d.render=function(){var a=this.__getItemSummaryView();return g.jsx("div",{className:this.__getClassNames(),children:g.jsxs(a,{imageHeight:this.ENTITY_IMAGE_HEIGHT,imageSrc:this.getImageSrc(),children:[this.__renderTitle(),this.__renderSubtitles(),this.__renderEntityDescription()]})})};return c}(g.PureComponent);e.exports=a}),null);
__d("FBPaymentsCheckoutNUXBase.react",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.Component);e.exports=c}),null);
__d("FBPaymentsCheckoutNUXContainerBase.react",["fbt","FBPaymentsLoggerConstants","React","abstractMethod"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");var h=b("FBPaymentsLoggerConstants").LoggerFlowStep,i=b("FBPaymentsLoggerConstants").LoggerEvent,j=4989;c=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.handleContinueButtonClick=function(){c.__getAPI().dismissNUX(j),c.props.onContinueButtonClick()};b=!1;b?(c.__getAPI().viewNUX(j),c.props.logger&&c.props.logger.setFlowStep(h.NUX).setEventName(i.INIT).logVital()):c.props.onContinueButtonClick();return c}var d=c.prototype;d.getBackButtonText=function(){return g._("Back")};d.getContinueButtonText=function(){return g._("Continue")};d.__getAPI=function(){return b("abstractMethod")("FBPaymentsCheckoutNUXContainerBase","__getAPI")};return c}(a.Component);e.exports=c}),null);
__d("FBPaymentsCheckoutNUXContentHelper",["cx","fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={getHeaderTitle:function(){return h._("Simple, Secure Payments")},getNUXMessages:function(){return[{color:"#4ad0ba",messageTitle:h._("Private"),message:h._("We never post or share your purchases."),iconSrc:"_3ufk"},{color:"#54c7ec",messageTitle:h._("Secure"),message:h._("Info is protected with bank-level security."),iconSrc:"_3ufl"},{color:"#8c72cb",messageTitle:h._("Reliable"),message:h._("Fast, convenient checkout every time."),iconSrc:"_3ufm"}]}};e.exports=a}),null);
__d("FBPaymentsCheckoutNUXMessageBase.react",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.Component);e.exports=c}),null);
__d("FBPaymentsPayActionButtonViewBase.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getActionText=function(){var a=this.props.actionTitle!=null?this.props.actionTitle:g._("Pay");return a};c.getBackText=function(){return this.props.backTitle!=null?this.props.backTitle:g._("Back")};return b}(a.Component);e.exports=c}),null);
__d("FBPaymentsPayActionRowContainerV2Base.react",["FBPaymentsCheckoutStep","FBPaymentsLoggerConstants","React","abstractMethod"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("FBPaymentsLoggerConstants").LoggerEvent,i=b("FBPaymentsLoggerConstants").LoggerFlowStep;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={innerHeight:window.innerHeight,isPayActionRowSticky:!0,showDisclaimerPopupMenu:!1,showDisclaimerSection:!1},c.$1=function(a){c.props.logger&&c.props.logger.setFlowStep(i.CHECKOUT_TERMS).setEventName(h.CLICK).updateExtraData({status:a?"expanded":"collapsed"}).log(),c.setState({showDisclaimerPopupMenu:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a,c){!c.showDisclaimerSection&&this.state.showDisclaimerSection&&(this.props.logger&&this.props.logger.setFlowStep(i.CHECKOUT_TERMS).setEventName(h.DISPLAY).log()),a.checkoutStep!=this.props.checkoutStep&&this.props.checkoutStep==b("FBPaymentsCheckoutStep").CONFIRMATION&&this.setState({showDisclaimerPopupMenu:!1})};c.getDerivedStateFromProps=function(a,b){var c=babelHelpers["extends"]({},b);c.showDisclaimerSection=a.payButtonEnabled||b.showDisclaimerSection;return c};d.render=function(){var a,b=this.__getView(),c=this.props.configuration;a=(a=this.props.actionTitle)!=null?a:c.actionTitle;return g.jsx(b,{actionTitle:a,backButton:this.props.backButton===!0||c.backButton===!0,displayPrice:this.props.displayPrice,isLoading:this.props.isLoading,isPayActionRowSticky:this.state.isPayActionRowSticky,onBackButtonClick:this.props.onBackButtonClick,onPayButtonClick:this.props.onPayButtonClick,onToggleDisclaimerPopup:this.$1,payButtonEnabled:this.props.payButtonEnabled,price:this.props.price,renderInline:this.props.renderInline,showDisclaimerPopupMenu:this.state.showDisclaimerPopupMenu,showDisclaimerSection:this.state.showDisclaimerSection,subscriptionTermsDetails:this.props.subscriptionTermsDetails,termsAndPolicies:this.props.termsAndPolicies})};d.__getView=function(){return b("abstractMethod")("FBPaymentsPayActionRowContainerV2Base","__getView")};return c}(g.Component);e.exports=a}),null);
__d("FBPaymentsPayActionRowViewV2Base.react",["fbt","FBPaymentsSubscriptionUtils","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getPayButtonText=function(){return this.props.actionTitle?this.props.actionTitle:g._("Pay")};d.getBackButtonText=function(){return g._("Back")};d.getInlineViewText=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.inline_view)!=null?a.text:a:a:a};d.getInlineViewRanges=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.inline_view)!=null?a.ranges:a:a:a};d.getActions=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.expanded_view)!=null?a.actions:a:a:a};d.getHeaderText=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.expanded_view)!=null?(a=a.header)!=null?a.text:a:a:a:a};d.getHeaderRanges=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.expanded_view)!=null?(a=a.header)!=null?a.ranges:a:a:a:a};d.getTitleText=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.expanded_view)!=null?(a=a.title)!=null?a.text:a:a:a:a};d.getTitleRanges=function(){var a;return(a=this.props)!=null?(a=a.termsAndPolicies)!=null?(a=a.expanded_view)!=null?(a=a.title)!=null?a.ranges:a:a:a:a};d.getSubscriptionTerms=function(){return b("FBPaymentsSubscriptionUtils").getSubscriptionTerms(this.props.subscriptionTermsDetails,this.getPayButtonText())};return c}(a.Component);e.exports=c}),null);
__d("FBPaymentsFreeTrialExtension",["FBPaymentsFreeTrialExtensionStore","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=function(d){babelHelpers.inheritsLoose(c,d);function c(){return d.apply(this,arguments)||this}c.getStores=function(){return[b("FBPaymentsFreeTrialExtensionStore")]};c.calculateState=function(){var a=b("FBPaymentsFreeTrialExtensionStore").getState().freeTrialExtensionConfig,c=a.formattedDescription,d=a.nextBillTime,e=a.subscriptionFrequency,f=a.subscriptionPrice,g=a.trialFrequency;a=a.trialPeriod;return{formattedDescription:c,nextBillTime:d,subscriptionFrequency:e,subscriptionPrice:f,trialFrequency:g,trialPeriod:a}};var e=c.prototype;e.render=function(){return g.jsx(a,babelHelpers["extends"]({},this.state))};return c}(g.PureComponent);return b("FluxContainer").create(c)}e.exports={create:a}}),null);
__d("FBPaymentsFreeTrialViewBase.react",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.PureComponent);e.exports=c}),null);
__d("FBPaymentsExtensionV2ManagerBase",["FBLogger","FBPaymentsCheckoutConstants","abstractMethod"],(function(a,b,c,d,e,f){"use strict";var g=b("FBPaymentsCheckoutConstants").Extensions;a=function(){function a(){}var c=a.prototype;c.getExtensionContainer=function(a){g[a]||b("FBLogger")("fbpay_experience").mustfix("Non-existent payments extension "+a);var c=this.__getExtensionMap().get(a);c||b("FBLogger")("fbpay_experience").mustfix("Unimplemented payments extension "+a);return c};c.__getExtensionMap=function(){return b("abstractMethod")("FBPaymentsExtensionV2ManagerBase","__getExtensionMap")};return a}();e.exports=a}),null);
__d("FBPaymentsContactInfoExtension",["invariant","Promise","FBPayCheckoutWebFunnelLoggingUtils","FBPaymentsCheckoutContext","FBPaymentsContactInfoActions","FBPaymentsContactInfoTypes","FBPaymentsDispatcher","FBPaymentsLoggerConstants","FBPaymentsModulesAPIShared","FBPaymentsUniversalErrorUtils","FluxContainer","React","shallowArrayEqual"],(function(a,b,c,d,e,f,g){"use strict";var h=b("FBPayCheckoutWebFunnelLoggingUtils").webFunnelLogFBPayCheckout,i=b("React"),j=b("FBPaymentsLoggerConstants").LoggerEvent,k=b("FBPaymentsLoggerConstants").LoggerFlowStep;function a(a,c,d,e,f){f=function(f){babelHelpers.inheritsLoose(l,f);function l(a){var c;c=f.call(this,a)||this;c.state={contactInfoDisclaimer:null,contactName:"",isContactEmailRequired:!0,isContactNameRequired:!0,isContactPhoneRequired:!0,isNewContactEmailValid:!1,isNewContactNameValid:!1,isNewContactPhoneNumberValid:!1,newContactEmail:"",newContactPhoneNumber:"",selectedContactEmail:null,selectedContactPhoneNumber:null,showHardError:!1,validationContactEmailErrorMessage:null,validationContactNameErrorMessage:null,validationContactPhoneNumberErrorMessage:null};c.handleContactInfoDataPreparation=function(){var a=c.state,d=a.isContactEmailRequired,e=a.isContactPhoneRequired,f=a.selectedContactEmail;a=a.selectedContactPhoneNumber;var g=c.context.funnelLoggingSessionID;if((f||!d)&&(a||!e))return null;var i=null;if(!f&&d){var l=c.state.newContactEmail;h("add_email",g);c.props.logger.setFlowStep(k.ADD_EMAIL).setEventName(j.API_INIT).log();i=new(b("Promise"))(function(a,d){b("FBPaymentsModulesAPIShared").addUserContactEmail(l,c.$1(),c.props.logger.getSessionID(),function(d){b("FBPaymentsContactInfoActions").newSavedContactEmail({id:d,email:l}),c.props.logger.setFlowStep(k.ADD_EMAIL).setEventName(j.SUCCESS).log(),a({success:!0,data:{emailAddress:l,emailID:d}})},function(d){var e=b("FBPaymentsUniversalErrorUtils").getErrorCode(d),f=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(d),g=b("FBPaymentsUniversalErrorUtils").getServerErrorMessage(d);c.props.logger.setFlowStep(k.ADD_EMAIL).setEventName(j.FAIL).setUserFacingMessage(f).setErrorMessage(g).setUserFacingErrorCode(e).setErrorCode(e).log();a({success:!1,error:d})})})}f=null;if(!a&&e){var m=c.state.newContactPhoneNumber,n={raw_input:m,payment_type:c.$1(),logging_id:c.props.logger.getSessionID()};h("add_phone",g);c.props.logger.setFlowStep(k.ADD_PHONE).setEventName(j.API_INIT).log();f=new(b("Promise"))(function(a,d){b("FBPaymentsModulesAPIShared").addContactPhoneNumber(n,function(d){b("FBPaymentsContactInfoActions").newSavedContactPhoneNumber({id:d,intlNumberWithPlus:m,formattedIntlNumberWithPlus:m}),c.props.logger.setFlowStep(k.ADD_PHONE).setEventName(j.SUCCESS).log(),a({success:!0,data:{phoneNumberID:d}})},function(d){var e=b("FBPaymentsUniversalErrorUtils").getErrorCode(d),f=b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(d),g=b("FBPaymentsUniversalErrorUtils").getServerErrorMessage(d);c.props.logger.setFlowStep(k.ADD_PHONE).setEventName(j.FAIL).setUserFacingMessage(f).setErrorMessage(g).setUserFacingErrorCode(e).setErrorCode(e).log();a({success:!1,error:d})})})}return b("Promise").all([i,f]).then(function(a){var b={},c=!0,d;a.forEach(function(a){if(!a)return;a.success?b=babelHelpers["extends"]({},b,a.data):(c=!1,d=a.error)});return!c?{success:!1,error:d}:{success:!0,data:b}})};b("FBPaymentsDispatcher").explicitlyRegisterStores(c.constructor.getStores(a));var d=c.getPrefilledDataFromProps(a);d&&b("FBPaymentsContactInfoActions").setPrefilledData(d);d=c.getContactInfoTypesFromProps(a);b("FBPaymentsContactInfoActions").contactInfoTypesChanged({contactInfoTypes:d});return c}var m=l.prototype;m.componentDidUpdate=function(a){var c=this.getContactInfoTypesFromProps(this.props);a=this.getContactInfoTypesFromProps(a);b("shallowArrayEqual")(c,a)||b("FBPaymentsContactInfoActions").contactInfoTypesChanged({contactInfoTypes:c})};m.getContactInfoTypesFromProps=function(a){a.extensionConfiguration.identifier!=="CONTACT_INFO"&&g(0,2820,a.extensionConfiguration.identifier);return a.extensionConfiguration.contactInfoTypes};m.getPrefilledDataFromProps=function(a){a.extensionConfiguration.identifier!=="CONTACT_INFO"&&g(0,2820,a.extensionConfiguration.identifier);return a.extensionConfiguration.extensionPrefillData};l.getStores=function(a){if(a.isUsingUpdateCheckoutInfoAPI)return[e,c];else return[e,d,c]};l.calculateState=function(a,f){f.isUsingUpdateCheckoutInfoAPI||(d.get(b("FBPaymentsContactInfoTypes").NAME),d.get(b("FBPaymentsContactInfoTypes").EMAIL),d.get(b("FBPaymentsContactInfoTypes").PHONE_NUMBER));a=f.extensionConfiguration.identifier;f=e.getShowHardErrorOnExtension(a);a=c.getState();f={isContactNameRequired:a.isContactNameRequired,contactName:a.contactName,isNewContactNameValid:a.isNewContactNameValid,validationContactNameErrorMessage:a.validationContactNameErrorMessage,isContactEmailRequired:a.isContactEmailRequired,selectedContactEmail:a.selectedContactEmail,newContactEmail:a.newContactEmail,isNewContactEmailValid:a.isNewContactEmailValid,validationContactEmailErrorMessage:a.validationContactEmailErrorMessage,isContactPhoneRequired:a.isContactPhoneRequired,selectedContactPhoneNumber:a.selectedContactPhoneNumber,newContactPhoneNumber:a.newContactPhoneNumber,isNewContactPhoneNumberValid:a.isNewContactPhoneNumberValid,validationContactPhoneNumberErrorMessage:a.validationContactPhoneNumberErrorMessage,showHardError:f,contactInfoDisclaimer:a.contactInfoDisclaimer};return f};m.componentDidMount=function(){b("FBPaymentsContactInfoActions").registerExtensionDataPreparer(this.handleContactInfoDataPreparation)};m.handleContactNameChange=function(a,c,d){b("FBPaymentsContactInfoActions").contactNameUpdated({contactName:c,validationResult:d})};m.handleNewContactEmailChange=function(a,c,d){b("FBPaymentsContactInfoActions").newContactEmailUpdated({newContactEmail:c,validationResult:d})};m.handleNewContactPhoneNumberChange=function(a,c,d){b("FBPaymentsContactInfoActions").newContactPhoneNumberUpdated({newContactPhoneNumber:c,validationResult:d})};m.$2=function(){var a=this.props.extensionConfiguration;return a.identifier!=="CONTACT_INFO"?null:a.customContent};m.$1=function(){return this.props.checkoutConfiguration.paymentInfo.paymentItemType};m.render=function(){var b=this.$2();return i.jsx(a,babelHelpers["extends"]({},this.state,{customContent:b,isActive:this.props.isActive,onContactNameChange:this.handleContactNameChange,onNewContactEmailChange:this.handleNewContactEmailChange,onNewContactPhoneNumberChange:this.handleNewContactPhoneNumberChange}))};return l}(i.PureComponent);f.contextType=b("FBPaymentsCheckoutContext");return b("FluxContainer").create(f,{withProps:!0})}e.exports={create:a}}),null);
__d("FBPaymentsContactInfoSelectorViewV2Base.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getHardErrorMessage=function(){return g._("Please enter your information.")};c.getContactInformationLabel=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.title:a:a)||g._("Contact Information")};c.getCustomContentIconSrc=function(){var a;return(a=this.props)!=null?(a=a.customContent)!=null?a.iconSrc:a:a};c.getContactEmailLabel=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.emailFieldLabel:a:a)||g._("Email address")};c.getContactNameLabel=function(){return g._("Full name")};c.getContactPhoneNumberLabel=function(){return g._("Phone Number")};return b}(a.Component);e.exports=c}),null);
__d("FBPaymentsCouponCodeExtension",["FBPayCheckoutWebFunnelLoggingUtils","FBPaymentsCheckoutConstants","FBPaymentsCheckoutContext","FBPaymentsLoggerConstants","FBPaymentsCheckoutActions","FBPaymentsCouponCodeActions","FBPaymentsCouponCodeExtensionStore","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";var g=b("FBPayCheckoutWebFunnelLoggingUtils").webFunnelLogFBPayCheckout,h=b("FBPaymentsCheckoutConstants").Extensions,i=b("FBPaymentsLoggerConstants").LoggerEvent,j=b("FBPaymentsLoggerConstants").LoggerFlowStep,k=b("React");function a(a){var c=function(d){babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),k=0;k<e;k++)f[k]=arguments[k];return(a=c=d.call.apply(d,[this].concat(f))||this,c.state={couponCode:null,isApplied:!1,isCouponValid:!1,isFormFieldDisplayed:!1,isLoading:!1,message:null,placeholderText:null},c.handleActionButtonClick=function(){b("FBPaymentsCouponCodeActions").displayForm(),c.props.logger.setFlowStep(j.COUPON_CODE).setEventName(i.CLICK).log()},c.handleActionButtonRowClick=function(){b("FBPaymentsCouponCodeActions").displayForm(),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:h.COUPON_CODE,active:!0}),c.props.logger.setFlowStep(j.COUPON_CODE).setEventName(i.CLICK).log()},c.handleCancelClick=function(){b("FBPaymentsCouponCodeActions").dismissForm(),c.props.logger.setFlowStep(j.COUPON_CODE_FORM).setEventName(i.CLICK).updateExtraData({button_name:"cancel"}).updateExtraData({coupon:c.state.couponCode}).log(),g("coupon_code_form_exit_click",c.context.funnelLoggingSessionID)},c.handleCancelActiveStateClick=function(){b("FBPaymentsCouponCodeActions").dismissForm(),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:h.COUPON_CODE,active:!1}),c.props.logger.setFlowStep(j.COUPON_CODE_FORM).setEventName(i.CLICK).updateExtraData({button_name:"cancel"}).updateExtraData({coupon:c.state.couponCode}).log()},c.handleSaveClick=function(){var a;b("FBPaymentsCouponCodeActions").saveCouponCode();a=(a=c.props)==null?void 0:(a=a.checkoutExtraProps)==null?void 0:a.onCouponCodeApplied;a&&a(c.state.couponCode);c.props.logger.setFlowStep(j.COUPON_CODE_FORM).setEventName(i.CLICK).updateExtraData({button_name:"save"}).updateExtraData({coupon:c.state.couponCode}).log();g("add_coupon_code",c.context.funnelLoggingSessionID)},c.handleRemoveClick=function(){var a;b("FBPaymentsCouponCodeActions").couponCodeRemoved();a=(a=c.props)==null?void 0:(a=a.checkoutExtraProps)==null?void 0:a.onCouponCodeRemoved;a&&a();c.props.logger.setFlowStep(j.COUPON_CODE).setEventName(i.CLICK).updateExtraData({button_name:"remove"}).log()},a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.componentDidMount=function(){this.props.logger.setFlowStep(j.COUPON_CODE).setEventName(i.DISPLAY).updateExtraData({coupon:this.state.couponCode}).log()};e.componentDidUpdate=function(a,c){!c.isFormFieldDisplayed&&this.state.isFormFieldDisplayed&&(this.props.logger.setFlowStep(j.COUPON_CODE_FORM).setEventName(i.DISPLAY).updateExtraData({coupon:this.state.couponCode}).log(),g("coupon_code_form_display",this.context.funnelLoggingSessionID)),!c.isCouponValid&&this.state.isCouponValid&&this.state.isApplied&&b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:h.COUPON_CODE,active:!1})};c.getStores=function(){return[b("FBPaymentsCouponCodeExtensionStore")]};c.calculateState=function(){var a=b("FBPaymentsCouponCodeExtensionStore").getState();a={couponCode:a.couponCode,isApplied:a.isApplied,isCouponValid:a.isCouponValid,isFormFieldDisplayed:a.isFormFieldDisplayed,isLoading:a.isLoading,message:a.message,placeholderText:a.placeholderText};return a};e.handleInputChange=function(a,c,d){b("FBPaymentsCouponCodeActions").couponCodeEntered({couponCode:c})};e.render=function(){var b=this.state.couponCode!=null&&this.state.couponCode.trim().length>0;return k.jsx(a,babelHelpers["extends"]({},this.state,{isActive:this.props.isActive,isReadyToSave:b,onActionButtonClick:this.handleActionButtonClick,onCancelActiveStateClick:this.handleCancelActiveStateClick,onCancelClick:this.handleCancelClick,onInputChange:this.handleInputChange,onRemoveClick:this.handleRemoveClick,onRowClicked:this.handleActionButtonRowClick,onSaveClick:this.handleSaveClick}))};return c}(k.PureComponent);c.contextType=b("FBPaymentsCheckoutContext");return b("FluxContainer").create(c)}e.exports={create:a}}),null);
__d("FBPaymentsCouponCodeViewV2Base.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getFormTitle=function(){return g._("Promotions")};c.getPlaceholderText=function(){var a;return(a=this.props.placeholderText)!=null?a:g._("Enter Promo Code")};c.getActionButtonText=function(){return g._("Add Promo Code")};c.getCouponCodeCancelText=function(){return g._("Cancel")};c.getCouponCodeSaveText=function(){return g._("Apply")};c.getCouponCodeRemoveText=function(){return g._("Remove")};c.getCouponCodeErrorMessage=function(){return g._("The provided coupon was invalid.")};return b}(a.PureComponent);e.exports=c}),null);
__d("FBPaymentsCustomOptionsExtension",["invariant","FBPaymentsCheckoutActions","FBPaymentsCheckoutConfigurationStore","FBPaymentsCheckoutConstants","FBPaymentsCustomOptionsActions","FBPaymentsCustomOptionsExtensionStore","FBPaymentsLoggerConstants","FluxContainer","React","guid"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("FBPaymentsCheckoutConstants").CollectedDataKey,j=b("FBPaymentsCheckoutConstants").Extensions,k=b("FBPaymentsLoggerConstants").LoggerEvent,l=b("FBPaymentsLoggerConstants").LoggerFlowStep,m="custom_",n="price";function a(a,c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){var a,c;for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return(a=c=e.call.apply(e,[this].concat(f))||this,c.state={configuration:null,customOptionFormData:null,isCustomOptionFormValid:!1,selectedOptionID:null,showForm:!1,showHardError:!1},c.handleCustomOptionClick=function(a){b("FBPaymentsCustomOptionsActions").customOptionSelected({selectedOptionID:a}),c.props.logger.setFlowStep(c.$1()).setEventName(k.CLICK).addToExtraData("selected_option_id",a).log()},c.handleCustomOptionRowClicked=function(){b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.CUSTOM_OPTIONS,active:!0}),c.props.logger.setFlowStep(c.$1()).setEventName(k.INIT).log()},c.handleCancelActiveStateClick=function(){b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.CUSTOM_OPTIONS,active:!1}),c.props.logger.setFlowStep(c.$1()).setEventName(k.CANCEL).log()},c.handleAddCustomOptionClick=function(){b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.CUSTOM_OPTIONS,active:!0}),b("FBPaymentsCustomOptionsActions").addCustomOptionClick(),c.props.logger.setFlowStep(l.ADD_CUSTOM_OPTION).setEventName(k.INIT).log()},c.handleNewCustomOptionFormDataChange=function(a,d){b("FBPaymentsCustomOptionsActions").newCustomOptionFormDataChange({customOptionFormData:a,isCustomOptionFormValid:d}),d||c.props.logger.setFlowStep(l.ADD_CUSTOM_OPTION).setEventName(k.CLICK).addToExtraData("form_data",JSON.stringify(a)).addToExtraData("isInvalid","true").log()},c.handleRemoveCustomOptionClick=function(){var a=c.state.configuration;if(!a)return;var b=a.options;b.length===1&&b[0].optionId.startsWith(m)&&(b.pop(),c.setState({configuration:a}))},c.handleSaveNewCustomOption=function(){var a=c.state.configuration;if(!a){c.$2(l.ADD_CUSTOM_OPTION);return}var d=a.customOption||{},e=d.formFields,f=c.state.customOptionFormData;e&&f||g(0,4982);var h=f.title;f=f.price;var i;if(f){e=e.get(n);e&&e.currency||g(0,4983);i={currency:e.currency,amount:f}}e={optionId:m+b("guid")(),optionPrice:i,optionPriceList:[{label:d.priceLabel||"",price:i}],optionTitle:h};a.options.push(e);b("FBPaymentsCustomOptionsActions").saveNewCustomOption({newOption:e,newOptionsExtensionConfig:a});b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.CUSTOM_OPTIONS,active:!1});c.props.logger.setFlowStep(l.ADD_CUSTOM_OPTION).setEventName(k.SAVE_CLICK).addToExtraData("new_option",JSON.stringify(e)).log()},a)||babelHelpers.assertThisInitialized(c)}d.getStores=function(){return[c,b("FBPaymentsCustomOptionsExtensionStore"),b("FBPaymentsCheckoutConfigurationStore")]};d.calculateState=function(a,d){a=b("FBPaymentsCheckoutConfigurationStore").getCustomOptionsExtensionConfig();d=d.extensionConfiguration.identifier;d=c.getShowHardErrorOnExtension(d);var e=b("FBPaymentsCustomOptionsExtensionStore").getState();a={configuration:a,selectedOptionID:(a=e.selectedOption)!=null?a.optionId:a,showHardError:d,customOptionFormData:e.customOptionFormData,isCustomOptionFormValid:e.isCustomOptionFormValid,showForm:e.showForm};return a};var f=d.prototype;f.$1=function(){var a;return((a=this.state.configuration)==null?void 0:a.collectedDataKey)===i.SHIPPING_OPTION?l.SELECT_SHIPPING_OPTION:l.SELECT_CUSTOM_OPTION};f.$2=function(a){this.props.logger.setFlowStep(a).setEventName(k.INIT).addToExtraData("error","extension config is null").log()};f.render=function(){var b=this.state.configuration;if(!b){this.$2(this.$1());return null}return h.jsx(a,{configuration:b,isActive:this.props.isActive,isCustomOptionFormSaveEnabled:this.state.isCustomOptionFormValid,onAddCustomOptionClick:this.handleAddCustomOptionClick,onCancelActiveStateClick:this.handleCancelActiveStateClick,onCustomOptionClick:this.handleCustomOptionClick,onCustomOptionFormDataChange:this.handleNewCustomOptionFormDataChange,onRemoveCustomOptionClick:this.handleRemoveCustomOptionClick,onRowClicked:this.handleCustomOptionRowClicked,onSaveNewCustomOption:this.handleSaveNewCustomOption,selectedOptionID:this.state.selectedOptionID,showForm:this.state.showForm,showHardError:this.state.showHardError})};return d}(h.PureComponent);return b("FluxContainer").create(d,{withProps:!0})}e.exports={create:a}}),null);
__d("FBPaymentsCustomOptionsViewV2Base.react",["fbt","FBPaymentsPriceListHelper","PECurrency","PECurrency.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("PECurrency").DEFAULT_AMOUNT_OFFSET,i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.ADD_CUSTOM_OPTION_KEY="add_custom_option",b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.shouldShowErrorMessage=function(){return this.props.showHardError};d.getBackButtonText=function(){return g._("Back")};d.getAddButtonLabel=function(){return g._("Add")};d.getHardErrorMessage=function(){return g._("Please enter a valid option.")};d.getFreePriceText=function(){return g._("Free")};d.getDefaultTitle=function(){return g._("Delivery method")};d.getOptionPrice=function(a){var c=a.optionPriceList;a=a.optionPrice;if(c)c=b("FBPaymentsPriceListHelper").calculateTotal(c);else if(a)c={currency:a.currency,amount:Number(a.amount)};else return null;a=((a=c)!=null?a.currency:a)||"USD";c=((c=c)!=null?c.amount:c)||0;return c===0?this.getFreePriceText():i.jsx(b("PECurrency.react"),{code:a,showSymbol:!0,value:h*c})};return c}(i.Component);e.exports=a}),null);
__d("FBPaymentsFrequencySelectorExtension",["fbt","invariant","BillingAgreementType","FBPaymentsFrequencySelectorActions","FBPaymentsFrequencySelectorExtensionStore","FBPaymentsLoggerConstants","FluxContainer","React","gkx","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("keyMirror")(b("BillingAgreementType")),k=b("FBPaymentsLoggerConstants").LoggerEvent,l=b("FBPaymentsLoggerConstants").LoggerFlowStep;function a(a){var c=function(d){babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),i=0;i<e;i++)f[i]=arguments[i];return(a=c=d.call.apply(d,[this].concat(f))||this,c.DEFAULT_SUBSCRIPTION_PERIOD=1,c.DEFAULT_FREQUENCIES=[{label:g._("One-Time Donation"),period:0,type:null}].concat(b("gkx")("676859")?[{label:g._("Daily Donation"),period:c.DEFAULT_SUBSCRIPTION_PERIOD,type:j.DAILY}]:[],[{label:g._("Monthly Donation"),period:c.DEFAULT_SUBSCRIPTION_PERIOD,type:j.MONTHLY}]),c.$1=function(a){c.state.frequencyOptions!=null||h(0,14212);var d=c.state.frequencyOptions[a];b("FBPaymentsFrequencySelectorActions").frequencySelectorOptionClick({index:a,selectedOption:d});c.props.logger.setFlowStep(l.SELECT_FREQUENCY).setEventName(k.CLICK).updateExtraData({selected_frequency_option_type:d==null?void 0:d.type}).log()},a)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("FBPaymentsFrequencySelectorExtensionStore")]};c.calculateState=function(){var a=b("FBPaymentsFrequencySelectorExtensionStore").getState();return{frequencyOptions:a.frequencyOptions,selectedIndex:a.selectedIndex,selectedOption:a.selectedOption,showDAFDisclaimer:a.showDAFDisclaimer}};var e=c.prototype;e.componentDidMount=function(){this.props.isUsingUpdateCheckoutInfoAPI||b("FBPaymentsFrequencySelectorActions").frequencySelectorLoaded(this.DEFAULT_FREQUENCIES),this.props.logger.setFlowStep(l.SELECT_FREQUENCY).setEventName(k.INIT).log()};e.render=function(){var b;b=(b=(b=this.props)==null?void 0:(b=b.checkoutExtraProps)==null?void 0:b.showDAFDisclaimer)!=null?b:this.state.showDAFDisclaimer;return i.jsx(a,babelHelpers["extends"]({},this.state,{isActive:this.props.isActive,onFrequencyOptionClick:this.$1,showDAFDisclaimer:b}))};return c}(i.PureComponent);return b("FluxContainer").create(c)}e.exports={create:a}}),null);
__d("FBPaymentsFrequencySelectorViewV2Base.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getFrequencySelectorTitle=function(){var a=this.props.frequencySelectorConfiguration;return a&&a.title||g._("Donation Frequency")};c.getFrequencySelectorAdditionalString=function(){var a;return((a=this.props)==null?void 0:a.showDAFDisclaimer)?g._("Monthly donations will be distributed to the nonprofit through Network for Good."):g._("Monthly donations will be distributed directly to the nonprofit.")};c.getMonthlyDonationText=function(){return g._("Make this a monthly donation")};return b}(a.PureComponent);e.exports=c}),null);
__d("FBPaymentsNationalitySelectorViewV2Base.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getNationalitySelectorTitle=function(){var a=this.props.nationalitySelectorConfiguration;return a&&a.title||g._("Citizenship")};return b}(a.PureComponent);e.exports=c}),null);
__d("FBPaymentsNationalitySelectorExtension",["fbt","invariant","FBPaymentsLoggerConstants","FBPaymentsNationalitySelectorActions","FBPaymentsNationalitySelectorExtensionStore","FBPaymentsNationalitySelectorViewV2Base.react","FluxContainer","React"],(function(a,b,c,d,e,f,g,h){var i=b("React"),j=b("FBPaymentsLoggerConstants").LoggerEvent,k=b("FBPaymentsLoggerConstants").LoggerFlowStep;function a(a){var c=function(d){"use strict";babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),i=0;i<e;i++)f[i]=arguments[i];return(a=c=d.call.apply(d,[this].concat(f))||this,c.DEFAULT_NATIONALITY_OPTION=!0,c.DEFAULT_NATIONALITIES=[{label:g._("Indian"),is_citizen:c.DEFAULT_NATIONALITY_OPTION},{label:g._("Other"),is_citizen:!1}],c.$1=function(a){c.state.nationalityOptions!=null||h(0,19045);var d=c.state.nationalityOptions[a];b("FBPaymentsNationalitySelectorActions").nationalitySelectorOptionClick({index:a,selectedOption:d})},c.$2=function(a){c.props.logger&&c.props.logger.setFlowStep(k.NATIONALITY_SELECTOR_DISCLAIMER).setEventName(j.CLICK).updateExtraData({status:a?"expanded":"collapsed"}).log(),c.setState({showDisclaimerPopupMenu:a})},a)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("FBPaymentsNationalitySelectorExtensionStore")]};c.calculateState=function(){var a=b("FBPaymentsNationalitySelectorExtensionStore").getState();return{nationalityOptions:a.nationalityOptions,selectedIndex:a.selectedIndex,selectedOption:a.selectedOption,showDisclaimerPopupMenu:!1}};var e=c.prototype;e.componentDidMount=function(){this.props.isUsingUpdateCheckoutInfoAPI||b("FBPaymentsNationalitySelectorActions").nationalitySelectorLoaded(this.DEFAULT_NATIONALITIES),this.props.logger.setFlowStep(k.SELECT_NATIONALITY).setEventName(j.INIT).log()};e.render=function(){return i.jsx(a,babelHelpers["extends"]({},this.state,{onToggleDisclaimerPopup:this.$2,onNationalityOptionClick:this.$1,isActive:this.props.isActive}))};return c}(i.PureComponent);return b("FluxContainer").create(c)}e.exports={create:a}}),null);
__d("FBPaymentsPaymentMethodSelectorExtension",["invariant","Promise","CHEXSandboxPrefillPaymentsDataConfig","FBPayCheckoutWebFunnelLoggingUtils","FBPaymentsAffirmMonthlyPayment","FBPaymentsCheckoutConstants","FBPaymentsCheckoutContext","FBPaymentsCreditCard","FBPaymentsCreditCardVerificationHelper","FBPaymentsDispatcher","FBPaymentsLoggerConstants","FBPaymentsModulesAPIShared","FBPaymentsModulesAPIUtils","FBPaymentsNewPaymentOptionTypes","FBPaymentsPaymentMethodActions","FBPaymentsPaymentMethodTypes","FBPaymentsPayPalBillingAgreement","FBPaymentsPayPalBillingAgreementTypes","FBPaymentsPerfLogger","FBPaymentsUniversalErrorUtils","FluxContainer","React","emptyFunction","immutable","killswitch"],(function(a,b,c,d,e,f,g){"use strict";var h=b("FBPayCheckoutWebFunnelLoggingUtils").webFunnelLogFBPayCheckout,i=b("React");b("immutable").Map;var j=b("FBPaymentsLoggerConstants").LoggerEvent,k=b("FBPaymentsLoggerConstants").LoggerFlowStep,l=b("FBPaymentsCheckoutConstants").Extensions;function a(a,c,d,e,f){var m=function(n){babelHelpers.inheritsLoose(m,n);function m(a){var c,d;d=n.call(this,a)||this;d.state={billingCountry:null,convertPayPalError:null,creditCardVerificationData:{},isConvertingPayPal:!1,isCreditCardVerificationDataValid:!1,isInitialized:!1,isNUXInlineCardFormMode:!1,isNUXInlineCardFormSavingCreditCard:!1,isPUXInlineCardFormMode:!1,isPUXNewPaymentOptionTabEnabled:!1,isLoading:!1,isSaving:!1,isURIReturnedFromCancelPayPal:!1,needVerification:!1,newCredentialID:null,newPaymentOptionData:null,onlyShowFirstExistingPaymentMethod:d.getOnlyShowFirstExistingPaymentMethod(),paymentMethodsInfo:null,paymentMethodsFrictionAttemptsInfo:null,saveErrors:null,selectedBank:null,selectedNewPaymentOptionType:null,selectedPaymentMethod:null,selectedPaymentMethodID:null,selectedPaymentMethodOrNewPaymentOption:null,selectedBillingCountry:null,showHardError:!1,verificationData:null};d.handleBankClick=function(a){d.props.logger.setFlowStep(k.SELECT_BANK_ACCOUNT).setEventName(j.CLICK).updateExtraData({bank_name:a.name}).log(),b("FBPaymentsPaymentMethodActions").handleBankClick({selectedBank:a})};d.handleExistingPaymentMethodClick=function(a){var c=d.context.funnelLoggingSessionID;b("FBPaymentsPaymentMethodActions").handleExistingPaymentMethodClick({paymentMethod:a});d.props.logger.setFlowStep(k.SELECT_PAYMENT_METHOD).setEventName(j.CLICK).updateExtraData({type:a.type,id:a.id}).log();h("select_credential",c,null,{selected_credential_id:a.id,selected_credential_type:a.type})};d.handleNewPaymentOptionClick=function(a,c){var e=d.getLoggerFlowStepForNewPaymentOption(a);d.props.logger.setFlowStep(e).setEventName(j.DISPLAY).log();d.funnelLogCheckoutEventForNewPaymentOption(a);b("FBPaymentsPaymentMethodActions").handleNewPaymentOptionClick({selectedNewPaymentOptionType:a,altPayID:c})};d.handleSaveCreditCardCheckboxClick=function(a){if(!d.getIsDirectChargeAllowed())return;a=a.target.checked;var c=a?j.CHECK:j.UNCHECK;d.props.logger.setFlowStep(k.CLICK_SAVE_CC_CHECKBOX).setEventName(c).log();b("FBPaymentsPaymentMethodActions").handleSaveCreditCardCheckboxClick({isNUXInlineCardFormSavingCreditCard:a})};d.handleSaveNewPaymentOptionPrePaymentCall=function(a,c){b("FBPaymentsPaymentMethodActions").clearSaveErrors(),d.saveNewPaymentOption(function(c){var e,f=d.state.selectedNewPaymentOptionType;switch(f){case b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD:e=new(b("FBPaymentsCreditCard"))({id:c});d.state.newPaymentOptionData||g(0,1007);var h=d.state.newPaymentOptionData.data;b("FBPaymentsPaymentMethodActions").updateVerificationData({verificationData:babelHelpers["extends"]({csc:h.csc},d.state.verificationData)});break;case b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL:b("FBPaymentsPerfLogger").logPaymentEvent(b("FBPaymentsLoggerConstants").PerformanceLogging.PAYPAL_FLOW_CLOSED);e=new(b("FBPaymentsPayPalBillingAgreement"))({id:c});break;case b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM:e=new(b("FBPaymentsAffirmMonthlyPayment"))({id:c});break;default:g(0,1008,f)}d.logNewPaymentOptionSaved(c,f);if(f!==b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM){h=d.constructor.$1(d.props);d.props.isUsingUpdateCheckoutInfoAPI?b("FBPaymentsModulesAPIShared").fetchPaymentMethodsInfoGraphQL(h):b("FBPaymentsPaymentMethodActions").fetchPaymentMethods(h);b("FBPaymentsPaymentMethodActions").selectSavedNewPaymentOptions(e)}d.props.logger.updateExtraData({default_save_cc_option:+d.isNUXInlineCardFormSavingCreditCardDefault,did_user_save_cc:+d.state.isNUXInlineCardFormSavingCreditCard});a({paymentMethod:e})},function(a){d.handleNewPaymentOptionSavedError(a),c(a)},c)};d.returnCCDataPrePaymentCall=function(a,c){b("FBPaymentsPaymentMethodActions").clearSaveErrors();d.state.newPaymentOptionData||g(0,1007);c=d.state.newPaymentOptionData.data;c.country||(c.country=d.state.billingCountry);b("FBPaymentsPaymentMethodActions").setFakeSelectedPaymentMethod();d.props.logger.updateExtraData({default_save_cc_option:+d.isNUXInlineCardFormSavingCreditCardDefault,did_user_save_cc:+d.state.isNUXInlineCardFormSavingCreditCard});a(b("FBPaymentsModulesAPIUtils").prepareDirectChargeCreditCardData(c))};d.handleNewPaymentOptionFormDataUpdated=function(a){var c;c=a==null?void 0:(c=a.data)==null?void 0:c.country;var e=d.state.selectedBillingCountry;if(e!==c){var f;f=(f=d.props)==null?void 0:(f=f.checkoutExtraProps)==null?void 0:f.onBillingCountryChange;f&&f(c||e)}b("FBPaymentsPaymentMethodActions").handleNewPaymentOptionFormDataUpdated({newPaymentOptionData:a,itemType:d.getPaymentType()})};d.handleSaveNewPaymentOption=function(){b("FBPaymentsPaymentMethodActions").beforeSaveNewPaymentOptions(),d.saveNewPaymentOption(d.handleNewPaymentOptionSaved,d.handleNewPaymentOptionSavedError,d.handleCancelSaveNewPaymentOption)};d.handleNewPaymentOptionSaved=function(a){d.logNewPaymentOptionSaved(a,d.state.selectedNewPaymentOptionType);if(d.state.selectedNewPaymentOptionType!==b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM){var c=d.constructor.$1(d.props);b("FBPaymentsPaymentMethodActions").fetchPaymentMethods(c)}b("FBPaymentsPaymentMethodActions").handleNewPaymentOptionSaved({newCredentialID:a})};d.handleNewPaymentOptionSavedError=function(a){var c=d.getLoggerFlowStepForNewPaymentOption(d.state.selectedNewPaymentOptionType);d.props.logger.setFlowStep(c).setEventName(j.FAIL).updateExtraData({errors:a}).log();b("FBPaymentsPaymentMethodActions").handleNewPaymentOptionSavedError({saveErrors:a})};d.handleCancelSaveNewPaymentOption=function(){var a=d.getLoggerFlowStepForNewPaymentOption(d.state.selectedNewPaymentOptionType);d.props.logger.setFlowStep(a).setEventName(j.CANCEL_SAVING).log();b("FBPaymentsPaymentMethodActions").handleCancelSaveNewPaymentOption()};d.handleCancelActiveStateClick=function(){var a=d.getLoggerFlowStepForNewPaymentOption(d.state.selectedNewPaymentOptionType);d.props.logger.setFlowStep(a).setEventName(j.CANCEL).log();a=d.state.isPUXInlineCardFormMode?d.state.newPaymentOptionData:null;b("FBPaymentsPaymentMethodActions").handleCancelActiveStateClick({newPaymentOptionData:a})};d.handleCancelActiveForVerificationClick=function(){var a=d.state.selectedPaymentMethod;a=d.getLoggerFlowStepForVerification((a=a)!=null?a.type:a);d.props.logger.setFlowStep(a).setEventName(j.CANCEL).log();b("FBPaymentsPaymentMethodActions").handleCancelActiveForVerificationClick();d.props.onExtensionWidthChange(null)};d.handlePaymentInfoDataPreparation=function(){var a=d.state,c;a.needVerification?c=d.handleCreditCardVerificationPrePaymentCall:(a.selectedNewPaymentOptionType===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD||a.selectedNewPaymentOptionType===b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL&&!e.shouldConnectPayPalInCheckoutContainer()||a.selectedNewPaymentOptionType===b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM)&&(a.selectedNewPaymentOptionType===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD&&!a.isNUXInlineCardFormSavingCreditCard&&d.getIsDirectChargeAllowed()?c=d.returnCCDataPrePaymentCall:c=d.handleSaveNewPaymentOptionPrePaymentCall);return!c?null:new(b("Promise"))(function(a,b){c&&c(function(b){b=b||{},a({success:!0,data:b})},function(b){a({success:!1,error:b})})})};d.handleCreditCardVerificationPrePaymentCall=function(a,c){var e=d.constructor.$2(d.state.selectedPaymentMethod,d.props);e=b("FBPaymentsCreditCardVerificationHelper").shouldUpdateCreditCard(e);var g=function(){b("FBPaymentsPaymentMethodActions").completeCreditCardVerification({verificationData:{verified:!0,csc:d.state.creditCardVerificationData.csc}}),d.props.logger.setFlowStep(k.UPDATE_CARD).setEventName(j.SUCCESS).log(),a()},h=function(a){b("FBPaymentsPaymentMethodActions").handleUpdateCreditCardError({saveErrors:a}),d.props.logger.setFlowStep(k.UPDATE_CARD).setEventName(j.FAIL).updateExtraData({errors:a}).log(),c(a)};if(e){b("FBPaymentsPaymentMethodActions").beforeUpdateCreditCard();e=babelHelpers["extends"]((e={},e.cc_fbid=d.state.selectedPaymentMethodID,e),d.state.creditCardVerificationData,(e={},e.combined_payment_type=d.getPaymentType(),e.session_id=d.getLoggerSessionID(),e.logging_id=d.getLoggerSessionID(),e));d.props.logger.setFlowStep(k.UPDATE_CARD).setEventName(j.API_INIT).log();d.getPaymentType()==="mor_facebook_shop"?b("FBPaymentsModulesAPIShared").updateCreditCardRelayGraphQL(e,g,h):f.updateCreditCardGraphQL(e,g,h)}else g()};d.handleConvertPayPalBAToCIB=function(a){b("FBPaymentsPaymentMethodActions").beforeConvertPayPalBAToCIB();var c={billing_agreement_id:a.id,billing_agreement_type:b("FBPaymentsPayPalBillingAgreementTypes").CIB,logging_id:d.getLoggerSessionID()};d.props.logger.setFlowStep(k.PAYPAL_CONSENT).setEventName(j.API_INIT).setPaymentMethodID(a.id).log();f.convertPayPalBAToCIB(c,d.handleConvertPayPalBAToCIBSuccess,d.handleConvertPayPalBAToCIBError)};d.handleConvertPayPalBAToCIBSuccess=function(a){d.props.logger.setFlowStep(k.PAYPAL_CONSENT).setEventName(j.SUCCESS).setPaymentMethodID(a).log(),b("FBPaymentsPaymentMethodActions").convertPayPalBAToCIBV2(),d.props.onExtensionWidthChange(null)};d.handleConvertPayPalBAToCIBError=function(a){d.props.logger.setFlowStep(k.PAYPAL_CONSENT).setEventName(j.FAIL).setErrorMessage(b("FBPaymentsUniversalErrorUtils").getUserFacingErrorMessage(a)).log(),b("FBPaymentsPaymentMethodActions").handleConvertPayPalBAToCIBError({convertPayPalError:a})};d.isNUXInlineCardFormSavingCreditCardDefault=d.state.isNUXInlineCardFormSavingCreditCard;b("FBPaymentsDispatcher").explicitlyRegisterStores(d.constructor.getStores(a));c=(c=d.props)!=null?(c=c.checkoutExtraProps)!=null?c.shouldVerifyCSC:c:c;b("FBPaymentsPaymentMethodActions").setShouldVerifyCSC({shouldVerifyCSC:d.props.checkoutConfiguration.paymentInfo.paymentItemType==="nmor_donation_p4c"||!!c||Boolean((c=d.state.selectedPaymentMethod)==null?void 0:c.isSoftDisabled)});a=(c=a)!=null?(c=c.checkoutExtraProps)!=null?c.affirmCredentialID:c:c;b("FBPaymentsPaymentMethodActions").setAffirmCredentialID(a);c=d.getOnlyShowFirstExistingPaymentMethod();b("FBPaymentsPaymentMethodActions").setOnlyShowFirstExistingPaymentMethod({onlyShowFirstExistingPaymentMethod:c});return d}var o=m.prototype;o.componentDidMount=function(){this.state.isURIReturnedFromCancelPayPal&&this.props.logger.setFlowStep(k.ADD_PAYPAL).setEventName(j.CANCEL).logVital(),b("FBPaymentsPaymentMethodActions").registerExtensionDataPreparer(this.handlePaymentInfoDataPreparation)};o.componentDidUpdate=function(a,c){!c.needVerification&&this.state.needVerification&&this.state.selectedPaymentMethod&&this.state.selectedPaymentMethod.type===b("FBPaymentsPaymentMethodTypes").CREDIT_CARD&&this.props.logger.setFlowStep(k.UPDATE_CARD).setEventName(j.DISPLAY).log()};m.getStores=function(a){if(a.isUsingUpdateCheckoutInfoAPI)return[e,c];else return[d,e,c]};m.$1=function(a){var b,c=a.checkoutConfiguration.paymentInfo;b=(b=a)!=null?(b=b.checkoutExtraProps)!=null?b.affirmCredentialID:b:b;return{paymentType:c.paymentItemType,orderID:c.orderId,receiverID:c.receiverId,extraData:c.extraData,isGuestCheckout:a.isGuestCheckout,affirmCredentialID:b}};m.$2=function(a,c){if(!a)return[];switch(a.type){case b("FBPaymentsPaymentMethodTypes").CREDIT_CARD:var d=new Set(a.getVerifyFields());c=((c=c)!=null?(c=c.checkoutExtraProps)!=null?c.shouldVerifyCSC:c:c)||a.isSoftDisabled;c&&d.add("csc");return Array.from(d);default:return[]}};m.$3=function(a,c){switch(a){case b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD:case b("FBPaymentsNewPaymentOptionTypes").NEW_ALT_PAY:return!!c&&c.isValid;default:return!0}};m.calculateState=function(a,b){a=babelHelpers["extends"]({},a);var f=this.$1(b);b.isUsingUpdateCheckoutInfoAPI||d.get(f,b.logger.getSessionID());f=c.getState();b=b.extensionConfiguration.identifier;b=e.getShowHardErrorOnExtension(b);a.billingCountry=f.billingCountry;a.convertPayPalError=f.convertPayPalError;a.creditCardVerificationData=f.creditCardVerificationData;a.isConvertingPayPal=f.isConvertingPayPal;a.isCreditCardVerificationDataValid=f.isCreditCardVerificationDataValid;a.isInitialized=f.isInitialized;a.isLoading=f.isLoading;a.isNUXInlineCardFormMode=f.isNUXInlineCardFormMode;a.isNUXInlineCardFormSavingCreditCard=f.isNUXInlineCardFormSavingCreditCard;a.isPUXInlineCardFormMode=f.isPUXInlineCardFormMode;a.isPUXNewPaymentOptionTabEnabled=f.isPUXNewPaymentOptionTabEnabled;a.isSaving=f.isSaving;a.isURIReturnedFromCancelPayPal=f.isURIReturnedFromCancelPayPal;a.needVerification=f.needVerification;a.newCredentialID=f.newCredentialID;a.newPaymentOptionData=f.newPaymentOptionData;a.onlyShowFirstExistingPaymentMethod=f.onlyShowFirstExistingPaymentMethod;a.paymentMethodsInfo=f.paymentMethodsInfo;a.paymentMethodsFrictionAttemptsInfo=f.paymentMethodsFrictionAttemptsInfo;a.saveErrors=f.saveErrors;a.selectedBank=f.selectedBank;a.selectedNewPaymentOptionType=f.selectedNewPaymentOptionType;a.selectedPaymentMethod=f.selectedPaymentMethod;a.selectedPaymentMethodID=f.selectedPaymentMethodID;a.selectedPaymentMethodOrNewPaymentOption=f.selectedPaymentMethodOrNewPaymentOption;a.selectedBillingCountry=f.selectedBillingCountry;a.showHardError=b;a.verificationData=f.verificationData;return a};o.getLoggerFlowStepForNewPaymentOption=function(a){switch(a){case b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD:return k.ADD_CARD;case b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL:return k.ADD_PAYPAL;case b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM:return k.ADD_AFFIRM;default:return""}};o.funnelLogCheckoutEventForNewPaymentOption=function(a){var c=this.context.funnelLoggingSessionID;switch(a){case b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD:h("select_add_credit_card_option",c);return;case b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL:h("select_add_paypal_option",c);return;default:return}};o.getLoggerFlowStepForVerification=function(a){switch(a){case b("FBPaymentsPaymentMethodTypes").CREDIT_CARD:return k.VERIFY_CARD;case b("FBPaymentsPaymentMethodTypes").PAYPAL_BILLING_AGREEMENT:return k.PAYPAL_CONSENT;default:return""}};o.getLoggerSessionID=function(){return this.props.logger.getSessionID()};o.getPaymentType=function(){return this.props.checkoutConfiguration.paymentInfo.paymentItemType};o.getPaymentAccountID=function(){var a;return((a=this.state)!=null?(a=a.paymentMethodsInfo)!=null?a.accountID:a:a)||""};o.getOnlyShowFirstExistingPaymentMethod=function(){var a;return!!((a=this.props)!=null?(a=a.checkoutExtraProps)!=null?a.onlyShowFirstExistingPaymentMethod:a:a)};o.handleSecondaryPaymentMethodCheckboxClick=function(a,c){b("FBPaymentsPaymentMethodActions").handleSecondaryPaymentMethodCheckboxClick({paymentMethod:a},c)};o.getIsDirectChargeAllowed=function(){var a=this.props.isGuestCheckout;return a?!1:!1};o.saveNewPaymentOption=function(a,c,d){var h=this,i=this.state.selectedNewPaymentOptionType,k=this.getLoggerFlowStepForNewPaymentOption(i);this.props.logger.setFlowStep(k).setEventName(j.API_INIT).log();switch(i){case b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD:k=this.state.newPaymentOptionData;k||g(0,1009,i);var m=this.props.checkoutConfiguration.paymentInfo;k=k.data;k.combined_payment_type=this.getPaymentType();k.receiver_id=m.receiverId;k.session_id=this.getLoggerSessionID();k.logging_id=this.getLoggerSessionID();k.country||(k.country=this.state.billingCountry);m=(m=e.getState().checkoutInfoGraphQLResponse)==null?void 0:m.should_switch_to_payment_dev_env;this.getPaymentType()==="mor_facebook_shop"?b("FBPaymentsModulesAPIShared").addCreditCardRelayGraphQL(k,a,c):f.addCreditCardGraphQL(k,m,a,c);break;case b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL:k={logger:this.props.logger,paymentType:this.props.checkoutConfiguration.paymentInfo.paymentItemType,onSuccess:a,onError:c,onCancel:function(){return h.handleCancelConnectPaypal(d)}};b("FBPaymentsPaymentMethodActions").connectPayPal(k);break;case b("FBPaymentsNewPaymentOptionTypes").NEW_AFFIRM:m=this.props.extensionConfiguration.identifier===l.PAYMENT_METHOD?this.props.extensionConfiguration.affirmCheckoutObject:null;!m&&g(0,1312);k={affirmCheckoutObject:m,checkoutConfig:this.props.checkoutConfiguration,checkoutExtraProps:this.props.checkoutExtraProps||{},onAuthorizeSuccess:a,onCancel:d,onError:c};b("FBPaymentsPaymentMethodActions").connectAffirm(k);break;default:g(0,1008,i)}};o.logNewPaymentOptionSaved=function(a,b){b=this.getLoggerFlowStepForNewPaymentOption(b);this.props.logger.setFlowStep(b).setEventName(j.SUCCESS).setPaymentMethodID(a).logVital()};o.handleCancelConnectPaypal=function(a){this.props.logger.setFlowStep(k.ADD_PAYPAL).setEventName(j.CANCEL).logVital(),a()};o.handleCreditCardVerificationFormValidation=function(a,c){b("FBPaymentsPaymentMethodActions").handleCreditCardVerificationFormValidation({creditCardVerificationData:c,isCreditCardVerificationDataValid:a})};o.handleShowOtherPaymentMethodClick=function(){b("FBPaymentsPaymentMethodActions").setOnlyShowFirstExistingPaymentMethod({onlyShowFirstExistingPaymentMethod:!1})};o.shouldPrefillCreditCardDetailsForDev=function(){var a;return((a=e.getState().checkoutInfoGraphQLResponse)==null?void 0:a.should_switch_to_payment_dev_env)&&!b("killswitch")("COMMERCE_SANDBOX_PREFILL_PAYMENT_INFO")&&this.getPaymentType()==="nmor_checkout_experiences"};o.getExtensionPrefillData=function(){var a=this.props.extensionConfiguration.identifier===l.PAYMENT_METHOD?this.props.extensionConfiguration.extensionPrefillData:null;if(this.shouldPrefillCreditCardDetailsForDev()){var c;a={card_holder_name:(c=(c=a)==null?void 0:c.card_holder_name)!=null?c:"",city:(c=(c=a)==null?void 0:c.city)!=null?c:"",creditCardNumber:b("CHEXSandboxPrefillPaymentsDataConfig").CC_DETAILS.CC_NUMBER,exp:b("CHEXSandboxPrefillPaymentsDataConfig").CC_DETAILS.MMYY,csc:b("CHEXSandboxPrefillPaymentsDataConfig").CC_DETAILS.CSC,street:(c=(c=a)==null?void 0:c.street)!=null?c:"",state:(c=(c=a)==null?void 0:c.state)!=null?c:"",zip:b("CHEXSandboxPrefillPaymentsDataConfig").CC_DETAILS.ZIP}}return a};o.render=function(){var c=this.constructor.$3(this.state.selectedNewPaymentOptionType,this.state.newPaymentOptionData);return i.jsx(a,babelHelpers["extends"]({},this.state,{isActive:this.props.isActive,isActiveForVerification:this.props.isActiveForVerification,isGuestCheckout:this.props.isGuestCheckout,extensionPrefillData:this.getExtensionPrefillData(),logger:this.props.logger,newPaymentOptionSaveEnabled:c,shouldDisableCreditCardFormFields:this.shouldPrefillCreditCardDetailsForDev(),onAddPaymentMethodClick:b("emptyFunction"),onBankClick:this.handleBankClick,onCancelActiveForVerificationClick:this.handleCancelActiveForVerificationClick,onCancelActiveStateClick:this.handleCancelActiveStateClick,onContactSupportClick:this.props.onContactSupportClick,onConvertPayPalBAToCIB:this.handleConvertPayPalBAToCIB,onCreditCardVerificationFormValidation:this.handleCreditCardVerificationFormValidation,onExtensionWidthChange:this.props.onExtensionWidthChange,onNewPaymentOptionClick:this.handleNewPaymentOptionClick,onNewPaymentOptionFormDataUpdated:this.handleNewPaymentOptionFormDataUpdated,onPaymentMethodClick:this.handleExistingPaymentMethodClick,onSaveCreditCardCheckboxClick:this.handleSaveCreditCardCheckboxClick,onSaveNewPaymentOption:this.handleSaveNewPaymentOption,onSecondaryPaymentMethodCheckboxClick:this.handleSecondaryPaymentMethodCheckboxClick,onShowOtherPaymentMethodClick:this.handleShowOtherPaymentMethodClick,paymentType:this.getPaymentType(),renderInline:!!((c=this.props)!=null?(c=c.checkoutConfiguration)!=null?(c=c.contentConfiguration)!=null?c.renderInline:c:c:c)}))};return m}(i.PureComponent);m.contextType=b("FBPaymentsCheckoutContext");return b("FluxContainer").create(m,{withProps:!0})}e.exports={create:a}}),null);
__d("FBPaymentsPaymentMethodSelectorViewV2Base.react",["fbt","invariant","ix","FBPaymentsNewPaymentOptionTypes","FBPaymentsPaymentMethodTypes","FBPaymentsPaymentMethodUtils","PaymentMethodUtils","React","ZipcodeCollectIndicatorFields","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=b("immutable").List;b("immutable").Map;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.handleCreditCardFormValidation=function(a,c){c={newPaymentOptionType:b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD,data:c||{},isValid:a};d.props.onNewPaymentOptionFormDataUpdated(c)},d.handleNewCreditCardFormValidation=function(a,c){a={newPaymentOptionType:b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD,data:a||{},isValid:c};d.props.onNewPaymentOptionFormDataUpdated(a)},d.handleNewCreditCardVerificationFormValidation=function(a,b){d.props.onCreditCardVerificationFormValidation(b,a)},d.handleNewMobileAltPayFormValidation=function(a,c){c={newPaymentOptionType:b("FBPaymentsNewPaymentOptionTypes").NEW_ALT_PAY,data:c||{},isValid:a};d.props.onNewPaymentOptionFormDataUpdated(c)},d.handleNewAltPayFormValidation=function(){var a={newPaymentOptionType:b("FBPaymentsNewPaymentOptionTypes").NEW_ALT_PAY,data:{},isValid:!0};d.props.onNewPaymentOptionFormDataUpdated(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldShowHardErrorMessage=function(){return this.props.showHardError};d.getAdditionalFields=function(){var a=this.getNewPaymentOptions();a=a.find(function(a){return a.type===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD});return a?a.additionalFields:null};d.getPaymentMethods=function(){var a=this.props.paymentMethodsInfo||{};return a.paymentMethods||k()};d.getPaymentMethodsFrictionAttemptsInfo=function(){return this.props.paymentMethodsFrictionAttemptsInfo};d.isPaymentMethodsFrictionAttemptExceedsMaxTry=function(a,b){if(!a||!b)return!1;b=b.get(a);return!b?!1:b.numberOfAttempts>=b.numberOfMaxTry};d.getSecondaryPaymentMethod=function(){var a=this.props.paymentMethodsInfo||{};a=a.secondaryPaymentMethods||k();return a.first()};d.getNewPaymentOptions=function(){var a=this.props.paymentMethodsInfo||{};a=a.newPaymentOptions||k();return this.maybePrioritizeNewPayPalPaymentOption(a)};d.maybePrioritizeNewPayPalPaymentOption=function(a){if(this.getPaymentMethods().size>0)return a;a=a.groupBy(function(a){return a.type===b("FBPaymentsNewPaymentOptionTypes").NEW_PAYPAL?1:0});var c=a.has(1)?a.get(1):k();a=a.has(0)?a.get(0):k();return c.concat(a)};d.shouldUseGiftcardBalanceCheckbox=function(a){a=a.credential_type||a.type;return a===b("FBPaymentsPaymentMethodTypes").GIFTCARD_BALANCE?!0:!1};d.getPaymentMethodSubtype=function(a){var c=a.type;Object.values(b("FBPaymentsPaymentMethodTypes")).includes(c)||h(0,3608,c);switch(c){case b("FBPaymentsPaymentMethodTypes").CREDIT_CARD:return a.cardType;case b("FBPaymentsPaymentMethodTypes").PAYPAL_BILLING_AGREEMENT:return"paypal";case b("FBPaymentsPaymentMethodTypes").MANUAL_TRANSFER:return"manual_transfer";case b("FBPaymentsPaymentMethodTypes").NET_BANKING:return"net_banking";case b("FBPaymentsPaymentMethodTypes").GIFTCARD_BALANCE:return"giftcard_balance";case b("FBPaymentsPaymentMethodTypes").DUMMY_PAYMENT_METHOD:return"dummy";default:return""}};d.getCreditCardIcons=function(){var a,c=this.getNewPaymentOptions();c=c.find(function(a){return a.type===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD});c=c.availableCardTypes.map(function(a){a=b("PaymentMethodUtils").getCardTypeFromServerSideCardType(a);return b("FBPaymentsPaymentMethodUtils").getImageForCard(a)});a=(a=this.props)!=null?(a=a.newPaymentOptionData)!=null?(a=a.data)!=null?a.creditCardNumber:a:a:a;if(a){a=b("PaymentMethodUtils").getCardType(a);a.type!="unknown"&&(c=k([b("FBPaymentsPaymentMethodUtils").getImageForCard(a)]))}return c.slice(0,4)};d.getShowZipCodeField=function(){var a=this.getNewPaymentOptions();a=a.find(function(a){return a.type===b("FBPaymentsNewPaymentOptionTypes").NEW_CREDIT_CARD});return!a?!1:a.zipFieldProperty!==b("ZipcodeCollectIndicatorFields").HIDDEN};d.getPrefilledDataForVerification=function(a){var b={};if(this.props.extensionPrefillData)b=this.props.extensionPrefillData;else{var c=a.cardholderName,d=a.countryCode,e=a.zip;b.exp=a.getFormattedExpiration();b.card_holder_name=c;b.country=d;b.zip=e}return b};d.getPrefilledDataForNewCard=function(){var a;a=(a={},a.country=this.props.billingCountry,a);this.props.extensionPrefillData&&(a=babelHelpers["extends"]({},a,this.props.extensionPrefillData));return a};d.shouldDisableCreditCardFormFields=function(){return this.props.shouldDisableCreditCardFormFields===!0};d.getCancelButtonText=function(){return g._("Cancel")};d.getBackButtonText=function(){return g._("Back")};d.getBankNameLabel=function(){return g._("Bank Name")};d.getPayButtonText=function(){return g._("Pay")};d.getPayPalConfirmButtonText=function(){return g._("Confirm and Pay")};d.getPaymentMethodLabel=function(){return g._("Payment Method")};d.getAddCardLabel=function(){return g._("Add New Card")};d.getAddPayPalLabel=function(){return g._("Connect PayPal")};d.getAddAffirmLabel=function(){return g._("Affirm Monthly Payments (US residents only)")};d.getDefaultBankSelectorOptionLabel=function(){return g._("Select a Bank")};d.getHardErrorMessage=function(){return g._("Please select a valid payment method.")};d.getPayPalLogoSrc=function(){return i("95544")};d.getPayPalConsentTitle=function(){return g._("Update to your preapproved payments")};d.getPayPalConsentSubtitle=function(){return g._("You can now use your preapproved Facebook payments authorization wherever PayPal is available when you pay on Facebook.")};d.getPayPalConsentPoliciesText=function(a){return g._("View {=Paypal Policies} and your payment method rights.",[g._param("=Paypal Policies",j.jsx("a",{href:a,target:"_blank",children:g._("PayPal Policies")}))])};d.getCSCVerificationMessage=function(a){if(a===4)return g._("For your security, please re-enter your card's four-digit security code on the front of your card.");else return g._("For your security, please re-enter your card's three-digit security code on the back of your card.")};d.getExistingPaymentMethodLabel=function(a){var b=this.getPaymentMethodSubtype(a);b==="paypal"||b==="giftcard_balance"||b==="dummy"?b=a.getDisplaySubtitle():b="*"+a.last4;return b};d.getExistingPaymentMethodIconImage=function(a){var c;this.getPaymentMethodSubtype(a)==="paypal"?c=b("FBPaymentsPaymentMethodUtils").getImageForPayPal():this.getPaymentMethodSubtype(a)==="giftcard_balance"?c=b("FBPaymentsPaymentMethodUtils").getImageForFBBalance():c=b("FBPaymentsPaymentMethodUtils").getImageForCardType(this.getPaymentMethodSubtype(a));return c};d.getOtherPaymentMethodLabel=function(){return g._("Use other payment method")};d.shouldHidePaymentOptions=function(){var a=this.getPaymentMethods();return a.isEmpty()?!1:this.props.onlyShowFirstExistingPaymentMethod};return c}(j.Component);e.exports=a}),null);
__d("FBPaymentsPINVerificationExtension",["FBPaymentsCheckoutActions","FBPaymentsCheckoutConstants","FBPaymentsDispatcher","FBPaymentsPINActions","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("FBPaymentsCheckoutConstants").Extensions;function a(a,c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){var a,b;for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(a=b=e.call.apply(e,[this].concat(d))||this,b.state={needVerification:!1,pin:null,verified:!1},a)||babelHelpers.assertThisInitialized(b)}var f=d.prototype;f.componentDidMount=function(){b("FBPaymentsDispatcher").explicitlyRegisterStore(a),b("FBPaymentsPINActions").fetchPINSettings()};d.getStores=function(){return[a]};d.calculateState=function(b){b=babelHelpers["extends"]({},b);var c=a.getState();b.needVerification=c.needVerification;b.pin=c.pin;b.verified=c.verified;return b};f.$1=function(a){b("FBPaymentsPINActions").pinValidated(a)};f.$2=function(){var a={active:!1,extensionName:h.PIN_VERIFICATION};b("FBPaymentsCheckoutActions").requestActiveExtensionForVerification(a)};f.render=function(){return g.jsx(c,babelHelpers["extends"]({},this.state,{isActive:this.props.isActive,isActiveForVerification:this.props.isActiveForVerification,onCancelActiveForVerificationClick:this.$2,onPINEnter:this.$1}))};return d}(g.PureComponent);return b("FluxContainer").create(d)}e.exports={create:a}}),null);
__d("FBPaymentsPINVerificationViewV2Base.react",["fbt","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getBackButtonText=function(){return g._("Back")};return b}(a.Component);c.propTypes={isActive:(d=b("prop-types")).bool.isRequired,isActiveForVerification:d.bool.isRequired,onCancelActiveForVerificationClick:d.func.isRequired,onPINEnter:d.func.isRequired};e.exports=c}),null);
__d("FBPaymentsPriceSelectorExtension",["FBPaymentsDispatcher","FBPaymentsLoggerConstants","FBPaymentsPriceSelectorActions","FBPaymentsPriceSelectorConfigStore","FBPaymentsPriceSelectorExtensionStore","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("FBPaymentsLoggerConstants").LoggerEvent,i=b("FBPaymentsLoggerConstants").LoggerFlowStep;function a(a,c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(a){var c;c=e.call(this,a)||this;c.state={customAmount:"",customAmountInputErrorMessage:null,priceSelectorConfiguration:null,selectedIndex:-1,showHardError:!1};c.handleCustomAmountInputChange=function(a,d,e){b("FBPaymentsPriceSelectorActions").priceSelectorChangeCustomAmountInput({customAmount:d,validationResult:e}),e.isValid||c.props.logger.setFlowStep(i.SELECT_AMOUNT).setEventName(h.CLICK).setRawAmount(Number(d)).setCurrency(c.getCurrency()).setUserFacingMessage(e.errorMessage).log()};c.handleCustomAmountInputBlur=function(a,b,d){c.props.logger.setFlowStep(i.SELECT_AMOUNT).setEventName(h.BLUR).setRawAmount(Number(b)).setCurrency(c.getCurrency()).setUserFacingMessage(d.errorMessage).log()};c.handlePriceButtonClick=function(a){b("FBPaymentsPriceSelectorActions").priceSelectorButtonClick({index:a}),c.props.logger.setFlowStep(i.SELECT_AMOUNT).setEventName(h.CLICK).setRawAmount(c.getRawAmountAtIndex(a)).setCurrency(c.getCurrency()).log()};b("FBPaymentsDispatcher").explicitlyRegisterStores(c.constructor.getStores(a));return c}d.getStores=function(a){if(a.isUsingUpdateCheckoutInfoAPI)return[c,b("FBPaymentsPriceSelectorExtensionStore")];else return[c,b("FBPaymentsPriceSelectorConfigStore"),b("FBPaymentsPriceSelectorExtensionStore")]};d.getPriceSelectorConfigStoreQuery=function(a){a=a.checkoutConfiguration.paymentInfo;return{payment_type:a.paymentItemType,order_id:a.orderId?a.orderId:"",extra_data:JSON.stringify(a.extraData)}};d.calculateState=function(a,d){a=this.getPriceSelectorConfigStoreQuery(d);d.isUsingUpdateCheckoutInfoAPI||b("FBPaymentsPriceSelectorConfigStore").get(a);a=d.extensionConfiguration.identifier;d=c.getShowHardErrorOnExtension(a);a=b("FBPaymentsPriceSelectorExtensionStore").getState();a={priceSelectorConfiguration:a.priceSelectorConfiguration,customAmount:a.customAmount,customAmountInputErrorMessage:a.customAmountInputErrorMessage,selectedIndex:a.selectedIndex,showHardError:d};return a};var f=d.prototype;f.getCurrency=function(){var a=this.state.priceSelectorConfiguration;return a&&a.getCurrency()};f.getRawAmountAtIndex=function(a){var b=this.state.priceSelectorConfiguration;return!b?null:Number(b.getSelectedAmountFromIndex(a))};f.handleCustomAmountInputFocus=function(){b("FBPaymentsPriceSelectorActions").priceSelectorCustomAmountInputFocus()};f.render=function(){return g.jsx(a,babelHelpers["extends"]({},this.state,{isActive:this.props.isActive,onCustomAmountInputBlur:this.handleCustomAmountInputBlur,onCustomAmountInputChange:this.handleCustomAmountInputChange,onCustomAmountInputFocus:this.handleCustomAmountInputFocus,onPriceButtonClick:this.handlePriceButtonClick}))};return d}(g.PureComponent);return b("FluxContainer").create(d,{withProps:!0})}e.exports={create:a}}),null);
__d("FBPaymentsPriceSelectorViewV2Base.react",["fbt","PECurrency","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldShowHardErrorMessage=function(){return this.props.showHardError};d.getCustomAmoutInputPlaceHolder=function(){return g._("Other")};d.getNewlineCustomAmoutInputPlaceHolder=function(){var a=this.props.priceSelectorConfiguration;return a&&a.customAmount&&a.customAmount.placeholderText||g._("Custom Amount")};d.getPriceSelectorTitle=function(){var a=this.props.priceSelectorConfiguration;return a&&a.title||g._("Amount")};d.getCurrencySymbol=function(){var a=this.props.priceSelectorConfiguration?b("PECurrency").getCurrencySymbol(this.props.priceSelectorConfiguration.getCurrency()):"";return(a=a)!=null?a:""};d.getHardErrorMessage=function(){return g._("Please select a valid amount.")};d.getFeesContent=function(){var a=this.props.priceSelectorConfiguration;return a&&a.feesContent||null};return c}(a.PureComponent);e.exports=c}),null);
__d("FBPaymentsMailingAddressSelectorViewV2Base.react",["fbt","FBPaymentsCheckoutContext","React","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.showUpdatedAddressForm=function(){var a;return(a=b("qex")._("858284"))!=null?a:!1};d.shouldHideExtension=function(){return this.props.isExtensionHidden};d.shouldShowErrorMessage=function(){return this.props.showHardError};d.getBackButtonText=function(){return g._("Back")};d.getCancelButtonText=function(){return g._("Cancel")};d.getEditButtonText=function(){return g._("Edit")};d.getHardErrorMessage=function(){return this.props.mailingAddresses.isEmpty()?g._("Please add an address."):g._("Please select a valid address.")};d.getSaveButtonText=function(){return g._("Save")};d.getContinueButtonText=function(){return g._("Continue")};d.getSaveSuggestedButtonText=function(){return g._("Save This Address")};d.getEditEnteredButtonText=function(){return g._("Edit This Address")};d.getDeliveryInformationLabel=function(){var a=this.props.customContent,b=a&&a.extensionLabel;return a&&b===null?null:b||g._("Delivery Information")};d.getMailingAddressLabel=function(){var a=this.props.customContent,b=a&&a.addressLabel;return a&&b===null?null:b||g._("Delivery address")};d.getAddMailingAddressNUXLabel=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.addAddressNuxCta:a:a)||g._("Add Address")};d.getAddMailingAddressLabel=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.addAddressPuxCta:a:a)||g._("Add New Address")};d.getSelectMailingAddressLabel=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.selectAddressPuxCta:a:a)||g._("Select Address")};d.getAddAddressTitle=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.formTitle:a:a)||g._("New Address")};d.getEditAddressTitle=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.formTitle:a:a)||g._("Edit Address")};d.getSuggestedAddressHeader=function(){return g._("Suggested Address")};d.getEnteredAddressHeader=function(){return g._("Entered Address")};d.getVerifyAddressHeader=function(){return g._("Verify Your Address")};d.getVerifyAddressMessage=function(){return g._("We couldn't verify the address you entered. You can save our suggested address or edit the address you entered.")};d.getShippingAddressMessage=function(){var a;return((a=this.props)!=null?(a=a.customContent)!=null?a.formFooterMessage:a:a)||g._("Your address info is stored securely and only shared with the seller you're purchasing from.")};d.getIndiaDonationDisclaimerMessage=function(){var a;if(this.props.paymentType!="nmor_donation_p4c"||!b("gkx")("1395698"))return null;var c="https://www.facebook.com/legal/donation_button_terms";return g._("Your address will be shared with {nonprofit_name} and is subject to the {donation_terms}.",[g._param("nonprofit_name",(a=this.props.customContent)==null?void 0:a.receiverName),g._param("donation_terms",h.jsx("a",{href:c,target:"_blank",children:g._("Charitable Donation Terms")}))])};return c}(h.Component);a.contextType=b("FBPaymentsCheckoutContext");e.exports=a}),null);
__d("FBPaymentsShippingAddressExtension",["invariant","FBPayCheckoutWebFunnelLoggingUtils","FBPaymentsCheckoutActions","FBPaymentsCheckoutConstants","FBPaymentsCheckoutContext","FBPaymentsContactInfoTypes","FBPaymentsDispatcher","FBPaymentsLoggerConstants","FBPaymentsModulesAPIShared","FBPaymentsShippingAddressActions","FBPaymentsShippingAddressExtensionUtil","FluxContainer","React","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("FBPayCheckoutWebFunnelLoggingUtils").webFunnelLogFBPayCheckout,i=b("React"),j=b("FBPaymentsCheckoutConstants").Extensions,k=b("FBPaymentsLoggerConstants").LoggerEvent,l=b("FBPaymentsLoggerConstants").LoggerFlowStep;function a(a,c,d,e,f){var m=function(n){babelHelpers.inheritsLoose(m,n);function m(a){var c;c=n.call(this,a)||this;c.state={addressFormConfig:null,enteredAddress:null,isExtensionHidden:!1,isLoading:!1,isNewAddressValid:!1,isSaving:!1,mailingAddresses:b("immutable").List(),newAddress:null,saveErrors:null,selectedAddress:null,selectedEditAddress:null,showForm:!1,showHardError:!1,showUpfrontAddressCollection:!1,suggestedAddress:null,userGeoCountry:null};c.handleAddMailingAddressClick=function(a){a===void 0&&(a=!1),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!0}),h("shipping_address_form_display",c.context.funnelLoggingSessionID),a||c.props.logger.setFlowStep(l.ADD_SHIPPING_ADDRESS).setEventName(k.DISPLAY).addToExtraData("address_NUX","true").addToExtraData("disable_upfront","true").log()};c.handleEditMailingAddressClick=function(a){b("FBPaymentsShippingAddressActions").mailingAddressEditSelected({selectedEditAddressID:a}),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!0}),c.props.logger.setFlowStep(l.EDIT_SHIPPING_ADDRESS).setEventName(k.DISPLAY).setMailingAddressID(a).log(),h("shipping_address_form_display",c.context.funnelLoggingSessionID)};c.handleMailingAddressClick=function(a){b("FBPaymentsShippingAddressActions").mailingAddressSelected({selectedAddressID:a}),c.props.logger.setFlowStep(l.SELECT_SHIPPING_ADDRESS).setEventName(k.CLICK).log(),h("select_shipping_address",c.context.funnelLoggingSessionID,null,{selected_shipping_address_id:a})};c.handleCancelActiveStateClick=function(a){c.state.saveErrors&&b("FBPaymentsShippingAddressActions").clearSaveErrors(),c.state.selectedEditAddress&&b("FBPaymentsShippingAddressActions").mailingAddressEditCanceled(),c.state.enteredAddress&&b("FBPaymentsShippingAddressActions").mailingAddressEnteredCleared(),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!1}),c.props.logger.setFlowStep(a).setEventName(k.CANCEL).log()};c.handleMailingAddressRowClicked=function(){b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!0}),c.props.logger.setFlowStep(l.SELECT_SHIPPING_ADDRESS).setEventName(k.DISPLAY).addToExtraData("address_NUX","false").log()};c.handleShowForm=function(a){var d=a?l.EDIT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;b("FBPaymentsShippingAddressActions").toggleMailingAddressForm({showForm:!0,selectedEditAddressID:a});c.props.logger.setFlowStep(d).setEventName(k.DISPLAY).addToExtraData("on_file_address_count",JSON.stringify(c.state.mailingAddresses.size)).log();h("shipping_address_form_display",c.context.funnelLoggingSessionID)};c.handleHideForm=function(){var a=c.state.selectedEditAddress?l.EDIT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;b("FBPaymentsShippingAddressActions").toggleMailingAddressForm({showForm:!1});c.props.logger.setFlowStep(a).setEventName(k.CANCEL).log();h("shipping_address_form_exit_click",c.context.funnelLoggingSessionID)};c.handleSaveNewAddress=function(){var a=c.state.newAddress;a||g(0,1094);var d=c.state.showUpfrontAddressCollection?l.UPFRONT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;Object.entries(b("FBPaymentsShippingAddressExtensionUtil").generateExtraDataFromNewAddress(a)).forEach(function(a){var b=a[0];a=a[1];c.props.logger.addToExtraData(b,JSON.stringify(a))});c.props.logger.setFlowStep(d).setEventName(k.CLICK).log();h("shipping_address_form_save_click",c.context.funnelLoggingSessionID);b("FBPaymentsShippingAddressActions").saveMailingAddress();c.props.logger.setFlowStep(d).setEventName(k.API_INIT).addToExtraData("on_file_address_count",JSON.stringify(c.state.mailingAddresses.size)).log();b("FBPaymentsModulesAPIShared").addMailingAddressGraphQL(a,c.getPaymentType(),c.props.logger.getSessionID(),c.handleSaveNewAddressSuccess,c.handleSaveNewAddressError,c.handleAddressSuggestion)};c.handleSaveNewAddressSuccess=function(a,d){var e=c.state.showUpfrontAddressCollection?l.UPFRONT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;c.props.logger.setFlowStep(e).setEventName(k.SUCCESS).setMailingAddressID(a).addToExtraData("is_suggested_address",c.state.suggestedAddress!==null?"true":"false").log();b("FBPaymentsShippingAddressActions").mailingAddressSaved({newAddressID:a,newAddress:d});c.state.showUpfrontAddressCollection||b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!1});c.state.showUpfrontAddressCollection&&b("FBPaymentsCheckoutActions").completeUpfrontAddressCollect()};c.handleSaveNewAddressError=function(a){var d=c.state.showUpfrontAddressCollection?l.UPFRONT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;c.props.logger.setFlowStep(d).setEventName(k.FAIL).setErrorMessage(JSON.stringify(a)).addToExtraData("is_suggested_address",c.state.suggestedAddress!==null?"true":"false").log();b("FBPaymentsShippingAddressActions").mailingAddressSaveError({error:a})};c.handleSaveEditAddress=function(){var a=c.state.newAddress;a||g(0,1094);var d=c.state.selectedEditAddress;d||g(0,1095);var e=!d.equalsFormAddress(a);Object.entries(b("FBPaymentsShippingAddressExtensionUtil").generateExtraDataFromNewAddress(a)).forEach(function(a){var b=a[0];a=a[1];c.props.logger.addToExtraData(b,JSON.stringify(a))});c.props.logger.setFlowStep(l.EDIT_SHIPPING_ADDRESS).setEventName(k.CLICK).log();h("shipping_address_form_save_click",c.context.funnelLoggingSessionID);b("FBPaymentsShippingAddressActions").saveMailingAddress();e?(c.props.logger.setFlowStep(l.EDIT_SHIPPING_ADDRESS).setEventName(k.API_INIT).setMailingAddressID(d.id).addToExtraData("has_address_changed",JSON.stringify(e)).log(),b("FBPaymentsModulesAPIShared").updateMailingAddress(a,d.id,c.getPaymentType(),c.props.logger.getSessionID(),c.handleSaveEditAddressSuccess,c.handleSaveEditAddressError,c.handleAddressSuggestion)):(b("FBPaymentsShippingAddressActions").mailingAddressEditCanceled(),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!1}))};c.handleSaveEditAddressSuccess=function(a,d){c.props.logger.setFlowStep(l.EDIT_SHIPPING_ADDRESS).setEventName(k.SUCCESS).setMailingAddressID(a).addToExtraData("is_suggested_address",c.state.suggestedAddress!==null?"true":"false").log(),b("FBPaymentsShippingAddressActions").mailingAddressSaved({newAddressID:a,newAddress:d}),b("FBPaymentsCheckoutActions").requestActiveExtension({extensionName:j.SHIPPING_ADDRESS,active:!1})};c.handleSaveEditAddressError=function(a){var d;c.props.logger.setFlowStep(l.EDIT_SHIPPING_ADDRESS).setEventName(k.FAIL).setMailingAddressID((d=c.state.selectedEditAddress)==null?void 0:d.id).setErrorMessage(JSON.stringify(a)).addToExtraData("is_suggested_address",c.state.suggestedAddress!==null?"true":"false").log();b("FBPaymentsShippingAddressActions").mailingAddressSaveError({error:a})};c.handleSaveSuggestedAddress=function(){var a=c.state.suggestedAddress;a||g(0,13704);Object.entries(b("FBPaymentsShippingAddressExtensionUtil").generateExtraDataFromNewAddress(a)).forEach(function(a){var b=a[0];a=a[1];c.props.logger.addToExtraData(b,JSON.stringify(a))});var d=c.state.selectedEditAddress!==null;c.props.logger.setFlowStep(l.ADDRESS_SUGGESTION).setEventName(k.CLICK).log();var e=d?l.EDIT_SHIPPING_ADDRESS:c.state.showUpfrontAddressCollection?l.UPFRONT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;c.props.logger.setFlowStep(e).setEventName(k.CLICK).addToExtraData("is_suggested_address","true").log();b("FBPaymentsShippingAddressActions").saveMailingAddress();c.props.logger.setFlowStep(e).setEventName(k.API_INIT).setMailingAddressID((e=c.state.selectedEditAddress)==null?void 0:e.id).addToExtraData("is_suggested_address","true").log();if(d){b("FBPaymentsModulesAPIShared").updateMailingAddress(a.toFormData(),b("nullthrows")((e=c.state.selectedEditAddress)==null?void 0:e.id),c.getPaymentType(),c.props.logger.getSessionID(),c.handleSaveEditAddressSuccess,c.handleSaveEditAddressError)}else b("FBPaymentsModulesAPIShared").addMailingAddressGraphQL(a.toFormData(),c.getPaymentType(),c.props.logger.getSessionID(),c.handleSaveNewAddressSuccess,c.handleSaveNewAddressError)};c.handleCancelAddressSuggestion=function(){var a;c.props.logger.setFlowStep(l.ADDRESS_SUGGESTION).setEventName(k.CANCEL).setMailingAddressID((a=c.state.selectedEditAddress)==null?void 0:a.id).log();b("FBPaymentsShippingAddressActions").mailingAddressSuggestedCleared()};c.handleAddressSuggestion=function(a){var d=c.state.selectedEditAddress!==null?l.EDIT_SHIPPING_ADDRESS:c.state.showUpfrontAddressCollection?l.UPFRONT_SHIPPING_ADDRESS:l.ADD_SHIPPING_ADDRESS;c.props.logger.setFlowStep(d).setEventName(k.SUGGESTION).setMailingAddressID((d=c.state.selectedEditAddress)==null?void 0:d.id).log();c.props.logger.setFlowStep(l.ADDRESS_SUGGESTION).setEventName(k.DISPLAY).setMailingAddressID((d=c.state.selectedEditAddress)==null?void 0:d.id).log();b("FBPaymentsShippingAddressActions").mailingAddressSuggested({suggestedAddress:a})};c.handleFetchAddressFormConfigSuccess=function(a,d){b("FBPaymentsShippingAddressActions").addressFormConfigFetched({userGeoCountry:a,addressFormConfig:d}),c.props.logger.setFlowStep(l.FETCH_ADDRESS_FORM_CONFIG).setEventName(k.SUCCESS).addToExtraData("address_form_config_size",JSON.stringify(Array.from(d).length)).addToExtraData("user_geo_country",JSON.stringify(a)).log()};c.handleFetchAddressFormConfigError=function(a){b("FBPaymentsShippingAddressActions").addressFormConfigFetchError({error:a}),c.props.logger.setFlowStep(l.FETCH_ADDRESS_FORM_CONFIG).setEventName(k.FAIL).setErrorMessage(JSON.stringify(a)).log()};b("FBPaymentsDispatcher").explicitlyRegisterStores(c.constructor.getStores(a));b("FBPaymentsShippingAddressActions").mailingAddressExtensionHiddenStatusChanged({isHidden:c.getIsExtensionHiddenFromProps(a)});return c}var o=m.prototype;o.componentDidMount=function(){!this.state.addressFormConfig&&!this.props.isUsingUpdateCheckoutInfoAPI&&f.fetchMailingAddressConfig(this.getPaymentType(),this.handleFetchAddressFormConfigSuccess,this.handleFetchAddressFormConfigError),this.state.showUpfrontAddressCollection&&this.props.logger.setFlowStep(l.UPFRONT_SHIPPING_ADDRESS).setEventName(k.DISPLAY).log()};o.componentDidUpdate=function(a,c){c=this.getIsExtensionHiddenFromProps(a);a=this.getIsExtensionHiddenFromProps(this.props);c!==a&&b("FBPaymentsShippingAddressActions").mailingAddressExtensionHiddenStatusChanged({isHidden:a})};o.getIsExtensionHiddenFromProps=function(a){a.extensionConfiguration.identifier!=="SHIPPING_ADDRESS"&&g(0,1096,a.extensionConfiguration.identifier);a=a.extensionConfiguration.customContent;return!!a&&!!a.hideExtension};m.getStores=function(a){if(a.isUsingUpdateCheckoutInfoAPI)return[e,c];else return[e,d,c]};m.calculateState=function(a,f){f.isUsingUpdateCheckoutInfoAPI||d.get(b("FBPaymentsContactInfoTypes").MAILING_ADDRESS);a=f.extensionConfiguration.identifier;f=e.getShowHardErrorOnExtension(a);a=c.getState();var g=!c.isInitialized();g={isLoading:g,showHardError:f,isExtensionHidden:a.isExtensionHidden,mailingAddresses:a.mailingAddresses,selectedAddress:a.selectedAddress,selectedEditAddress:a.selectedEditAddress,enteredAddress:a.enteredAddress,suggestedAddress:a.suggestedAddress,saveErrors:a.saveErrors,isSaving:a.isSaving,newAddress:a.newAddress,isNewAddressValid:a.isNewAddressValid,showForm:a.showForm,showUpfrontAddressCollection:e.shouldShowUpfrontAddressCollection(),addressFormConfig:a.addressFormConfig,userGeoCountry:a.userGeoCountry};return g};o.getPaymentType=function(){return this.props.checkoutConfiguration.paymentInfo.paymentItemType};o.handleAddressFormChanged=function(a,c){b("FBPaymentsShippingAddressActions").newMailingAddressFormDataChange({newAddress:a,isNewAddressValid:c})};m.__getCustomContent=function(a){a=a.extensionConfiguration;if(a.identifier!=="SHIPPING_ADDRESS")return null;var b=a.customContent;a=a.shippingAddressData;a={addAddressNuxCta:(a==null?void 0:a.add_address_nux_cta)||(b==null?void 0:b.addAddressNuxCta),addAddressPuxCta:(a==null?void 0:a.add_address_pux_cta)||(b==null?void 0:b.addAddressPuxCta),addressLabel:(a==null?void 0:a.address_label)||(b==null?void 0:b.addressLabel),extensionLabel:(a==null?void 0:a.extension_label)||(b==null?void 0:b.extensionLabel),formTitle:(a==null?void 0:a.formTitle)||(b==null?void 0:b.formTitle),formFooterMessage:(a==null?void 0:a.form_footer_message)||(b==null?void 0:b.formFooterMessage),receiverName:b==null?void 0:b.receiverName,showAddressLabelForMsiteNux:b==null?void 0:b.showAddressLabelForMsiteNux,hideExtension:b==null?void 0:b.hideExtension,useNewAddressForm:b==null?void 0:b.useNewAddressForm};return a};o.render=function(){var b=this.constructor.__getCustomContent(this.props);return i.jsx(a,babelHelpers["extends"]({},this.state,{customContent:b,isActive:this.props.isActive,logger:this.props.logger,onAddMailingAddressClick:this.handleAddMailingAddressClick,onAddressFormChanged:this.handleAddressFormChanged,onCancelActiveStateClick:this.handleCancelActiveStateClick,onCancelSuggestedAddress:this.handleCancelAddressSuggestion,onContactSupportClick:this.props.onContactSupportClick,onEditMailingAddressClick:this.handleEditMailingAddressClick,onHideForm:this.handleHideForm,onMailingAddressClick:this.handleMailingAddressClick,onRowClicked:this.handleMailingAddressRowClicked,onSaveEditAddress:this.handleSaveEditAddress,onSaveNewAddress:this.handleSaveNewAddress,onSaveSuggestedAddress:this.handleSaveSuggestedAddress,onShowForm:this.handleShowForm,paymentType:this.getPaymentType()}))};return m}(i.PureComponent);m.contextType=b("FBPaymentsCheckoutContext");return b("FluxContainer").create(m,{withProps:!0})}e.exports={create:a}}),null);